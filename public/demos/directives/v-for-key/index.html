<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>v-for key çš„ä½œç”¨</title>
  <script src="/vue.js"></script>
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }
    body { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif; padding: 20px; background: #f5f5f7; }
    .demo-container { max-width: 700px; margin: 0 auto; }
    h3 { color: #1d1d1f; margin-bottom: 16px; font-size: 18px; }
    .card { background: white; border-radius: 12px; padding: 20px; margin-bottom: 16px; box-shadow: 0 2px 10px rgba(0,0,0,0.08); }
    .card-title { font-size: 16px; font-weight: 600; color: #1d1d1f; margin-bottom: 12px; display: flex; align-items: center; gap: 8px; }
    
    .btn { padding: 10px 20px; border-radius: 8px; border: none; font-size: 14px; cursor: pointer; transition: all 0.2s; margin: 4px; }
    .btn-primary { background: #007AFF; color: white; }
    .btn-danger { background: #FF3B30; color: white; }
    .btn:hover { transform: scale(1.02); }
    
    .list-item { display: flex; align-items: center; padding: 12px 16px; background: #f9fafb; border-radius: 10px; margin-bottom: 8px; gap: 12px; }
    .list-item input { flex: 1; padding: 8px; border: 1px solid #ddd; border-radius: 6px; }
    
    .compare-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 20px; }
    .compare-col h4 { margin-bottom: 12px; font-size: 14px; }
    
    .code-block { background: #1e1e1e; color: #d4d4d4; padding: 12px; border-radius: 8px; font-family: 'SF Mono', monospace; font-size: 13px; overflow-x: auto; margin-top: 12px; }
    .code-comment { color: #6a9955; }
    .code-keyword { color: #569cd6; }
    
    .tip-box { background: #e3f2fd; border-radius: 8px; padding: 12px; margin-top: 16px; font-size: 13px; color: #1565c0; }
    .warning-box { background: #fff3e0; border-radius: 8px; padding: 12px; margin-top: 16px; font-size: 13px; color: #e65100; }
    .error-box { background: #ffebee; border-radius: 8px; padding: 12px; margin-top: 16px; font-size: 13px; color: #c62828; }
    
    .step-badge { display: inline-block; padding: 2px 8px; background: #007AFF; color: white; border-radius: 4px; font-size: 12px; margin-right: 8px; }
  </style>
</head>
<body>
  <div id="app">
    <div class="demo-container">
      <h3>ğŸ”‘ key çš„ä½œç”¨</h3>
      
      <!-- é—®é¢˜æ¼”ç¤º -->
      <div class="card">
        <div class="card-title">
          <span>âš ï¸</span>
          <span>é—®é¢˜æ¼”ç¤ºï¼šä¸ä½¿ç”¨ key æˆ–ç”¨ index ä½œä¸º key</span>
        </div>
        
        <p style="color: #86868b; font-size: 14px; margin-bottom: 12px;">
          <span class="step-badge">æ­¥éª¤1</span>åœ¨æ¯ä¸ªè¾“å…¥æ¡†ä¸­è¾“å…¥ä¸€äº›å†…å®¹<br>
          <span class="step-badge">æ­¥éª¤2</span>ç‚¹å‡»"åœ¨å¼€å¤´æ·»åŠ "æŒ‰é’®<br>
          <span class="step-badge">æ­¥éª¤3</span>è§‚å¯Ÿè¾“å…¥æ¡†å†…å®¹çš„å˜åŒ–
        </p>
        
        <div class="compare-grid">
          <!-- ç”¨ index ä½œä¸º keyï¼ˆæœ‰é—®é¢˜ï¼‰ -->
          <div class="compare-col">
            <h4 style="color: #FF3B30;">âŒ :key="index"ï¼ˆæœ‰é—®é¢˜ï¼‰</h4>
            <div 
              class="list-item"
              v-for="(item, index) in listWithIndex"
              :key="index"
            >
              <span style="min-width: 60px;">{{ item.name }}</span>
              <input type="text" :placeholder="'è¾“å…¥ ' + item.name">
            </div>
            <button class="btn btn-danger" @click="addToStartIndex">åœ¨å¼€å¤´æ·»åŠ </button>
          </div>
          
          <!-- ç”¨ id ä½œä¸º keyï¼ˆæ­£ç¡®ï¼‰ -->
          <div class="compare-col">
            <h4 style="color: #34C759;">âœ“ :key="item.id"ï¼ˆæ­£ç¡®ï¼‰</h4>
            <div 
              class="list-item"
              v-for="item in listWithId"
              :key="item.id"
            >
              <span style="min-width: 60px;">{{ item.name }}</span>
              <input type="text" :placeholder="'è¾“å…¥ ' + item.name">
            </div>
            <button class="btn btn-primary" @click="addToStartId">åœ¨å¼€å¤´æ·»åŠ </button>
          </div>
        </div>
        
        <div class="error-box">
          âŒ <strong>é—®é¢˜ç°è±¡ï¼š</strong>ä½¿ç”¨ index ä½œä¸º key æ—¶ï¼Œåœ¨å¼€å¤´æ·»åŠ å…ƒç´ åï¼Œè¾“å…¥æ¡†å†…å®¹ä¼šé”™ä½ï¼<br>
          å› ä¸º Vue å¤ç”¨äº†é”™è¯¯çš„ DOM å…ƒç´ ã€‚
        </div>
      </div>
      
      <!-- åŸç†è§£é‡Š -->
      <div class="card">
        <div class="card-title">
          <span>ğŸ“–</span>
          <span>ä¸ºä»€ä¹ˆéœ€è¦ keyï¼Ÿ</span>
        </div>
        
        <p style="color: #1d1d1f; font-size: 14px; line-height: 1.8;">
          Vue ä½¿ç”¨ <strong>è™šæ‹Ÿ DOM</strong> æ¥æå‡æ€§èƒ½ã€‚å½“åˆ—è¡¨æ•°æ®å˜åŒ–æ—¶ï¼š
        </p>
        
        <ol style="color: #1d1d1f; font-size: 14px; line-height: 1.8; padding-left: 20px; margin: 12px 0;">
          <li>Vue ä¼šç”Ÿæˆæ–°çš„è™šæ‹Ÿ DOM æ ‘</li>
          <li>å¯¹æ¯”æ–°æ—§è™šæ‹Ÿ DOMï¼ˆDiff ç®—æ³•ï¼‰</li>
          <li><strong>key</strong> å¸®åŠ© Vue å‡†ç¡®è¯†åˆ«å“ªäº›å…ƒç´ è¢«æ”¹å˜ã€æ·»åŠ æˆ–åˆ é™¤</li>
          <li>åªæ›´æ–°å¿…è¦çš„ DOMï¼Œè€Œä¸æ˜¯é‡æ–°æ¸²æŸ“æ•´ä¸ªåˆ—è¡¨</li>
        </ol>
        
        <div class="code-block">
          <span class="code-comment">// âŒ é”™è¯¯ï¼šä½¿ç”¨ index ä½œä¸º key</span><br>
          <span class="code-comment">// å½“åˆ—è¡¨é¡ºåºæ”¹å˜æ—¶ï¼Œindex ä¹Ÿä¼šæ”¹å˜ï¼ŒVue ä¼šé”™è¯¯å¤ç”¨å…ƒç´ </span><br>
          v-for="(item, index) in list" <span class="code-keyword">:key</span>="index"<br><br>
          <span class="code-comment">// âœ“ æ­£ç¡®ï¼šä½¿ç”¨å”¯ä¸€ä¸”ç¨³å®šçš„ id</span><br>
          v-for="item in list" <span class="code-keyword">:key</span>="item.id"
        </div>
      </div>
      
      <!-- key çš„æœ€ä½³å®è·µ -->
      <div class="card">
        <div class="card-title">
          <span>âœ…</span>
          <span>key çš„æœ€ä½³å®è·µ</span>
        </div>
        
        <div class="tip-box" style="margin: 0;">
          <strong>å¥½çš„ keyï¼š</strong><br>
          âœ“ åç«¯è¿”å›çš„å”¯ä¸€ IDï¼ˆæœ€æ¨èï¼‰<br>
          âœ“ UUID / å”¯ä¸€æ ‡è¯†ç¬¦<br>
          âœ“ æ•°æ®æœ¬èº«å¦‚æœå”¯ä¸€ï¼ˆå¦‚èº«ä»½è¯å·ï¼‰
        </div>
        
        <div class="warning-box">
          <strong>é¿å…ä½¿ç”¨ï¼š</strong><br>
          âœ— æ•°ç»„ç´¢å¼• indexï¼ˆé™¤éåˆ—è¡¨æ˜¯é™æ€çš„ã€ä¸ä¼šå˜åŒ–ï¼‰<br>
          âœ— éšæœºæ•°ï¼ˆæ¯æ¬¡æ¸²æŸ“éƒ½ä¼šå˜åŒ–ï¼‰<br>
          âœ— å½“å‰æ—¶é—´æˆ³
        </div>
        
        <div class="code-block">
          <span class="code-comment">&lt;!-- âœ“ æ¨èå†™æ³• --&gt;</span><br>
          &lt;div v-for="user in users" <span class="code-keyword">:key</span>="user.id"&gt;<br><br>
          <span class="code-comment">&lt;!-- âœ“ é™æ€åˆ—è¡¨å¯ä»¥ç”¨ index --&gt;</span><br>
          &lt;li v-for="(item, index) in staticList" <span class="code-keyword">:key</span>="index"&gt;
        </div>
      </div>
    </div>
  </div>
  
  <script src="app.js"></script>
</body>
</html>

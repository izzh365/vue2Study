// _prism-theme.scss
// Prism.js 自定义浅色主题（带行号）
// 苹果风格配色

// ==================== 代码块容器 ====================

pre[class*="language-"] {
  background: $color-code-bg;
  border: 1px solid $color-border;
  border-radius: $radius-md;
  padding: 0;
  margin: $spacing-md 0;
  overflow: hidden;
  font-family: $font-family-code;
  font-size: 14px;
  line-height: 1.6;
  position: relative;
}

code[class*="language-"] {
  display: block;
  padding: $spacing-md;
  padding-left: 3.8em;
  overflow-x: auto;
  @include custom-scrollbar;
  background: none;
  text-shadow: none;
  color: $color-text;
}

// 内联代码
:not(pre) > code {
  background: rgba($color-primary, 0.1);
  color: $color-primary-dark;
  padding: 2px 6px;
  border-radius: $radius-sm;
  font-family: $font-family-code;
  font-size: 0.9em;
}

// ==================== 行号样式 ====================

.line-numbers .line-numbers-rows {
  position: absolute;
  pointer-events: none;
  top: 0;
  left: 0;
  width: 3em;
  padding: $spacing-md 0;
  background: rgba(0, 0, 0, 0.02);
  border-right: 1px solid $color-border;
  font-size: inherit;
  line-height: inherit;
  letter-spacing: -1px;
  user-select: none;
  text-align: right;
  
  > span {
    display: block;
    padding-right: 0.8em;
    color: $color-text-light;
    
    &::before {
      content: counter(linenumber);
      counter-increment: linenumber;
    }
  }
}

// ==================== 语法高亮颜色 ====================

.token {
  // 注释
  &.comment,
  &.prolog,
  &.doctype,
  &.cdata {
    color: #6a737d;
    font-style: italic;
  }
  
  // 标点符号
  &.punctuation {
    color: #24292e;
  }
  
  // 属性、标签、布尔值、数字
  &.property,
  &.tag,
  &.boolean,
  &.number,
  &.constant,
  &.symbol,
  &.deleted {
    color: #d73a49;
  }
  
  // 选择器、属性名、字符串
  &.selector,
  &.attr-name,
  &.string,
  &.char,
  &.builtin,
  &.inserted {
    color: #22863a;
  }
  
  // 运算符
  &.operator,
  &.entity,
  &.url {
    color: #d73a49;
  }
  
  // 关键字
  &.atrule,
  &.attr-value,
  &.keyword {
    color: #d73a49;
  }
  
  // 函数、类名
  &.function,
  &.class-name {
    color: #6f42c1;
  }
  
  // 正则、变量
  &.regex,
  &.important,
  &.variable {
    color: #e36209;
  }
}

// ==================== 代码块标题栏 ====================

.code-header {
  @include flex-between;
  padding: $spacing-sm $spacing-md;
  background: rgba(0, 0, 0, 0.02);
  border-bottom: 1px solid $color-border;
  
  .code-lang {
    font-size: $font-size-xs;
    color: $color-text-secondary;
    text-transform: uppercase;
    font-weight: 500;
  }
  
  .code-actions {
    display: flex;
    gap: $spacing-sm;
  }
}

// ==================== 复制按钮 ====================

.copy-button {
  @include button-base;
  padding: $spacing-xs $spacing-sm;
  font-size: $font-size-xs;
  background: transparent;
  color: $color-text-secondary;
  border: 1px solid $color-border;
  
  &:hover {
    background: $color-card;
    color: $color-primary;
    border-color: $color-primary;
  }
  
  &.copied {
    background: $color-success;
    color: white;
    border-color: $color-success;
  }
}

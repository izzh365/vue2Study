<template>
  <div class="emit-page">
    <!-- é¡µé¢æ ‡é¢˜ -->
    <div class="page-header">
      <h1>â¬†ï¸ $emit å­ä¼ çˆ¶</h1>
      <p class="subtitle">Custom Events - å­ç»„ä»¶å‘çˆ¶ç»„ä»¶ä¼ é€’æ•°æ®</p>
    </div>

    <!-- æ¦‚å¿µè¯´æ˜ -->
    <KnowledgeCard title="ğŸ“– ä»€ä¹ˆæ˜¯ $emitï¼Ÿ">
      <div class="concept-content">
        <div class="analogy">
          <span class="emoji">ğŸ“¢</span>
          <div>
            <strong>é€šä¿—æ¯”å–»ï¼š</strong>
            <code>$emit</code> å°±åƒ<strong>å–Šè¯å™¨</strong>â€”â€”å­ç»„ä»¶å–Šä¸€å£°ï¼Œçˆ¶ç»„ä»¶å°±èƒ½å¬åˆ°ï¼
            å­ç»„ä»¶è§¦å‘ä¸€ä¸ªäº‹ä»¶ï¼Œçˆ¶ç»„ä»¶ç›‘å¬è¿™ä¸ªäº‹ä»¶å¹¶å“åº”ã€‚
          </div>
        </div>
        <p class="definition">
          <strong>å®˜æ–¹å®šä¹‰ï¼š</strong>
          <code>$emit</code> ç”¨äºè§¦å‘å½“å‰å®ä¾‹ä¸Šçš„äº‹ä»¶ã€‚
          çˆ¶ç»„ä»¶å¯ä»¥é€šè¿‡ <code>v-on</code> ç›‘å¬å­ç»„ä»¶è§¦å‘çš„è‡ªå®šä¹‰äº‹ä»¶ã€‚
        </p>
      </div>
    </KnowledgeCard>

    <!-- é€šä¿¡æµç¨‹ -->
    <KnowledgeCard title="ğŸ”„ $emit é€šä¿¡æµç¨‹">
      <div class="flow-diagram">
        <div class="flow-child">
          <span class="label">å­ç»„ä»¶</span>
          <code>this.$emit('update', value)</code>
        </div>
        <div class="flow-arrow">â¬†ï¸</div>
        <div class="flow-parent">
          <span class="label">çˆ¶ç»„ä»¶</span>
          <code>@update="handleUpdate"</code>
        </div>
      </div>
    </KnowledgeCard>

    <!-- Demo 1: åŸºç¡€ç”¨æ³• -->
    <KnowledgeCard title="ğŸ¯ Demo 1ï¼š$emit åŸºç¡€ç”¨æ³•">
      <TipBox type="info">
        <p>å­ç»„ä»¶é€šè¿‡ <code>this.$emit('äº‹ä»¶å')</code> è§¦å‘äº‹ä»¶ï¼Œçˆ¶ç»„ä»¶é€šè¿‡ <code>@äº‹ä»¶å</code> ç›‘å¬ã€‚</p>
      </TipBox>
      <DemoBox demoPath="components/emit-basic" title="$emit åŸºç¡€ç”¨æ³•" />
    </KnowledgeCard>

    <!-- Demo 2: ä¼ é€’å‚æ•° -->
    <KnowledgeCard title="ğŸ¯ Demo 2ï¼šä¼ é€’å‚æ•°">
      <TipBox type="info">
        <p><code>$emit</code> çš„ç¬¬äºŒä¸ªå‚æ•°å°±æ˜¯ä¼ é€’ç»™çˆ¶ç»„ä»¶çš„æ•°æ®ï¼ˆpayloadï¼‰ã€‚</p>
      </TipBox>
      <DemoBox demoPath="components/emit-params" title="ä¼ é€’å‚æ•°" />
    </KnowledgeCard>

    <!-- Demo 3: .sync ä¿®é¥°ç¬¦ -->
    <KnowledgeCard title="ğŸ¯ Demo 3ï¼š.sync ä¿®é¥°ç¬¦">
      <TipBox type="info">
        <p><code>.sync</code> æ˜¯ä¸€ä¸ªè¯­æ³•ç³–ï¼Œç”¨äºå®ç°"åŒå‘ç»‘å®š"æ•ˆæœã€‚å­ç»„ä»¶é€šè¿‡ <code>$emit('update:propName', value)</code> è§¦å‘æ›´æ–°ã€‚</p>
      </TipBox>
      <div class="sync-compare">
        <div class="compare-item">
          <strong>ä¸ä½¿ç”¨ .sync</strong>
          <code>&lt;child :value="val" @update:value="val = $event"&gt;</code>
        </div>
        <div class="compare-item">
          <strong>ä½¿ç”¨ .sync</strong>
          <code>&lt;child :value.sync="val"&gt;</code>
        </div>
      </div>
      <DemoBox demoPath="components/emit-sync" title=".sync ä¿®é¥°ç¬¦" />
    </KnowledgeCard>

    <!-- Demo 4: v-model è¯­æ³•ç³– -->
    <KnowledgeCard title="ğŸ¯ Demo 4ï¼šv-model è¯­æ³•ç³–">
      <TipBox type="info">
        <p>è‡ªå®šä¹‰ç»„ä»¶çš„ <code>v-model</code> é»˜è®¤ä½¿ç”¨ <code>value</code> prop å’Œ <code>input</code> äº‹ä»¶ï¼Œå¯é€šè¿‡ <code>model</code> é€‰é¡¹è‡ªå®šä¹‰ã€‚</p>
      </TipBox>
      <DemoBox demoPath="components/emit-v-model" title="v-model è¯­æ³•ç³–" />
    </KnowledgeCard>

    <!-- Demo 5: ç»¼åˆæ¡ˆä¾‹ -->
    <KnowledgeCard title="ğŸ¯ Demo 5ï¼šç»¼åˆæ¡ˆä¾‹ - è®¡æ•°å™¨">
      <TipBox type="success">
        <p>ä¸€ä¸ªå®Œæ•´çš„è®¡æ•°å™¨ç»„ä»¶ï¼Œå±•ç¤º props å’Œ $emit çš„é…åˆä½¿ç”¨ã€‚</p>
      </TipBox>
      <DemoBox demoPath="components/emit-counter" title="è®¡æ•°å™¨ç»„ä»¶" />
    </KnowledgeCard>

    <!-- æœ€ä½³å®è·µ -->
    <TipBox type="success" title="âœ… æœ€ä½³å®è·µ">
      <ul class="practice-list">
        <li>äº‹ä»¶åä½¿ç”¨ <strong>kebab-case</strong>ï¼ˆçŸ­æ¨ªçº¿æ ¼å¼ï¼‰</li>
        <li>äº‹ä»¶å‘½åè¦<strong>è¯­ä¹‰åŒ–</strong>ï¼Œå¦‚ <code>item-selected</code>ã€<code>form-submitted</code></li>
        <li>ä½¿ç”¨ <code>.sync</code> æ›¿ä»£ç¹ççš„ <code>v-bind</code> + <code>v-on</code></li>
        <li>è¡¨å•ç»„ä»¶ä¼˜å…ˆä½¿ç”¨ <code>v-model</code></li>
      </ul>
    </TipBox>
  </div>
</template>

<script>
import KnowledgeCard from '@/components/content/KnowledgeCard.vue'
import TipBox from '@/components/content/TipBox.vue'
import DemoBox from '@/components/demo/DemoBox.vue'

export default {
  name: 'EmitPage',

  components: {
    KnowledgeCard,
    TipBox,
    DemoBox
  }
}
</script>

<style lang="scss" scoped>
.emit-page {
  padding: 0 0 $spacing-2xl;
}

.page-header {
  text-align: center;
  margin-bottom: $spacing-xl;
  padding: $spacing-xl;
  background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
  border-radius: $radius-lg;
  color: white;

  h1 {
    font-size: 28px;
    margin-bottom: $spacing-sm;
  }

  .subtitle {
    opacity: 0.9;
    font-size: $font-size-lg;
  }
}

.concept-content {
  .analogy {
    display: flex;
    gap: $spacing-md;
    padding: $spacing-md;
    background: $color-bg;
    border-radius: $radius-md;
    margin-bottom: $spacing-md;

    .emoji {
      font-size: 32px;
    }
  }

  .definition {
    color: $color-text-secondary;
    line-height: 1.8;

    strong {
      color: $color-text;
    }

    code {
      background: $color-code-bg;
      padding: 2px 6px;
      border-radius: $radius-sm;
      font-family: $font-family-code;
    }
  }
}

.flow-diagram {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: $spacing-sm;
  padding: $spacing-lg;

  .flow-parent, .flow-child {
    padding: $spacing-md $spacing-lg;
    border-radius: $radius-md;
    text-align: center;

    .label {
      display: block;
      font-weight: 600;
      margin-bottom: $spacing-xs;
    }

    code {
      font-family: $font-family-code;
      font-size: $font-size-sm;
    }
  }

  .flow-child {
    background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
    color: white;

    code {
      background: rgba(255,255,255,0.2);
      padding: 4px 8px;
      border-radius: $radius-sm;
    }
  }

  .flow-arrow {
    font-size: 24px;
  }

  .flow-parent {
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    color: white;

    code {
      background: rgba(255,255,255,0.2);
      padding: 4px 8px;
      border-radius: $radius-sm;
    }
  }
}

.sync-compare {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: $spacing-md;
  margin-bottom: $spacing-md;

  @media (max-width: 768px) {
    grid-template-columns: 1fr;
  }

  .compare-item {
    padding: $spacing-md;
    background: $color-bg;
    border-radius: $radius-md;

    strong {
      display: block;
      margin-bottom: $spacing-sm;
      color: $color-text;
    }

    code {
      display: block;
      font-family: $font-family-code;
      font-size: $font-size-xs;
      color: $color-primary;
      word-break: break-all;
    }
  }
}

.practice-list {
  margin: 0;
  padding-left: $spacing-lg;

  li {
    margin-bottom: $spacing-sm;
    line-height: 1.6;

    &:last-child {
      margin-bottom: 0;
    }

    code {
      background: rgba(0,0,0,0.05);
      padding: 2px 6px;
      border-radius: $radius-sm;
      font-family: $font-family-code;
    }
  }
}
</style>

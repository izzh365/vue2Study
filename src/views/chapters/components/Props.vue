<template>
  <div class="props-page">
    <!-- é¡µé¢æ ‡é¢˜ -->
    <div class="page-header">
      <h1>â¬‡ï¸ Props çˆ¶ä¼ å­</h1>
      <p class="subtitle">Props - çˆ¶ç»„ä»¶å‘å­ç»„ä»¶ä¼ é€’æ•°æ®</p>
    </div>

    <!-- æ¦‚å¿µè¯´æ˜ -->
    <KnowledgeCard title="ğŸ“– ä»€ä¹ˆæ˜¯ Propsï¼Ÿ">
      <div class="concept-content">
        <div class="analogy">
          <span class="emoji">ğŸ“¬</span>
          <div>
            <strong>é€šä¿—æ¯”å–»ï¼š</strong>
            Props å°±åƒ<strong>å¿«é€’åŒ…è£¹</strong>â€”â€”çˆ¶ç»„ä»¶æ˜¯å‘ä»¶äººï¼Œå­ç»„ä»¶æ˜¯æ”¶ä»¶äººã€‚
            çˆ¶ç»„ä»¶æŠŠæ•°æ®"æ‰“åŒ…"å‘é€ï¼Œå­ç»„ä»¶"ç­¾æ”¶"åä½¿ç”¨ã€‚
          </div>
        </div>
        <p class="definition">
          <strong>å®˜æ–¹å®šä¹‰ï¼š</strong>
          Prop æ˜¯çˆ¶ç»„ä»¶ç”¨æ¥ä¼ é€’æ•°æ®ç»™å­ç»„ä»¶çš„è‡ªå®šä¹‰å±æ€§ã€‚
          å­ç»„ä»¶é€šè¿‡ <code>props</code> é€‰é¡¹å£°æ˜æœŸæœ›æ¥æ”¶çš„æ•°æ®ã€‚
        </p>
      </div>
    </KnowledgeCard>

    <!-- æ•°æ®æµå‘å›¾ -->
    <KnowledgeCard title="ğŸ”„ Props æ•°æ®æµå‘">
      <div class="flow-diagram">
        <div class="flow-parent">
          <span class="label">çˆ¶ç»„ä»¶</span>
          <code>:message="msg"</code>
        </div>
        <div class="flow-arrow">â¬‡ï¸</div>
        <div class="flow-child">
          <span class="label">å­ç»„ä»¶</span>
          <code>props: ['message']</code>
        </div>
      </div>
      <TipBox type="warning">
        <p><strong>å•å‘æ•°æ®æµ</strong>ï¼šProps æ˜¯å•å‘çš„ï¼Œå­ç»„ä»¶ä¸èƒ½ç›´æ¥ä¿®æ”¹ propsï¼Œå¦åˆ™ Vue ä¼šå‘å‡ºè­¦å‘Šï¼</p>
      </TipBox>
    </KnowledgeCard>

    <!-- Demo 1: åŸºç¡€ç”¨æ³• -->
    <KnowledgeCard title="ğŸ¯ Demo 1ï¼šProps åŸºç¡€ç”¨æ³•">
      <TipBox type="info">
        <p>ä½¿ç”¨ <code>props: ['propName']</code> å£°æ˜æ¥æ”¶çš„å±æ€§ï¼Œåœ¨æ¨¡æ¿ä¸­ç›´æ¥ä½¿ç”¨ã€‚</p>
      </TipBox>
      <DemoBox demoPath="components/props-basic" title="Props åŸºç¡€ç”¨æ³•" />
    </KnowledgeCard>

    <!-- Demo 2: ç±»å‹éªŒè¯ -->
    <KnowledgeCard title="ğŸ¯ Demo 2ï¼šProps ç±»å‹éªŒè¯">
      <div class="type-table">
        <table>
          <thead>
            <tr>
              <th>ç±»å‹</th>
              <th>ç¤ºä¾‹</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td><code>String</code></td>
              <td><code>type: String</code></td>
            </tr>
            <tr>
              <td><code>Number</code></td>
              <td><code>type: Number</code></td>
            </tr>
            <tr>
              <td><code>Boolean</code></td>
              <td><code>type: Boolean</code></td>
            </tr>
            <tr>
              <td><code>Array</code></td>
              <td><code>type: Array</code></td>
            </tr>
            <tr>
              <td><code>Object</code></td>
              <td><code>type: Object</code></td>
            </tr>
            <tr>
              <td><code>Function</code></td>
              <td><code>type: Function</code></td>
            </tr>
            <tr>
              <td>å¤šç§ç±»å‹</td>
              <td><code>type: [String, Number]</code></td>
            </tr>
          </tbody>
        </table>
      </div>
      <DemoBox demoPath="components/props-type" title="Props ç±»å‹éªŒè¯" />
    </KnowledgeCard>

    <!-- Demo 3: é»˜è®¤å€¼å’Œå¿…å¡« -->
    <KnowledgeCard title="ğŸ¯ Demo 3ï¼šé»˜è®¤å€¼ä¸å¿…å¡«">
      <TipBox type="info">
        <p><code>default</code> è®¾ç½®é»˜è®¤å€¼ï¼Œ<code>required: true</code> è¡¨ç¤ºå¿…å¡«ã€‚æ³¨æ„ï¼šå¯¹è±¡å’Œæ•°ç»„çš„é»˜è®¤å€¼å¿…é¡»ç”¨å‡½æ•°è¿”å›ï¼</p>
      </TipBox>
      <DemoBox demoPath="components/props-default" title="é»˜è®¤å€¼ä¸å¿…å¡«" />
    </KnowledgeCard>

    <!-- Demo 4: è‡ªå®šä¹‰éªŒè¯ -->
    <KnowledgeCard title="ğŸ¯ Demo 4ï¼šè‡ªå®šä¹‰éªŒè¯å‡½æ•°">
      <TipBox type="info">
        <p>ä½¿ç”¨ <code>validator</code> å‡½æ•°è¿›è¡Œå¤æ‚éªŒè¯ï¼Œè¿”å› <code>true</code> è¡¨ç¤ºéªŒè¯é€šè¿‡ã€‚</p>
      </TipBox>
      <DemoBox demoPath="components/props-validator" title="è‡ªå®šä¹‰éªŒè¯å‡½æ•°" />
    </KnowledgeCard>

    <!-- Demo 5: å•å‘æ•°æ®æµ -->
    <KnowledgeCard title="ğŸ¯ Demo 5ï¼šå•å‘æ•°æ®æµ">
      <TipBox type="warning">
        <p>å­ç»„ä»¶ä¸èƒ½ç›´æ¥ä¿®æ”¹ propsï¼å¦‚éœ€ä¿®æ”¹ï¼š</p>
        <ul>
          <li>ç”¨ <code>data</code> æ¥æ”¶ prop ä½œä¸ºåˆå§‹å€¼</li>
          <li>ç”¨ <code>computed</code> åŸºäº prop è®¡ç®—æ–°å€¼</li>
          <li>ç”¨ <code>$emit</code> é€šçŸ¥çˆ¶ç»„ä»¶ä¿®æ”¹</li>
        </ul>
      </TipBox>
      <DemoBox demoPath="components/props-one-way" title="å•å‘æ•°æ®æµ" />
    </KnowledgeCard>

    <!-- æœ€ä½³å®è·µ -->
    <TipBox type="success" title="âœ… æœ€ä½³å®è·µ">
      <ul class="practice-list">
        <li>å§‹ç»ˆä¸º props æ·»åŠ <strong>ç±»å‹éªŒè¯</strong></li>
        <li>å¸ƒå°”ç±»å‹ prop ä½¿ç”¨ <code>is-</code> æˆ– <code>has-</code> å‰ç¼€</li>
        <li>å¤æ‚å¯¹è±¡ä½¿ç”¨<strong>è§£æ„</strong>ä¼ é€’éœ€è¦çš„å±æ€§</li>
        <li>é¿å…åœ¨å­ç»„ä»¶ä¸­ä¿®æ”¹ propï¼Œéµå¾ªå•å‘æ•°æ®æµ</li>
      </ul>
    </TipBox>
  </div>
</template>

<script>
import KnowledgeCard from '@/components/content/KnowledgeCard.vue'
import TipBox from '@/components/content/TipBox.vue'
import DemoBox from '@/components/demo/DemoBox.vue'
import scrollTrackingMixin from '@/utils/scrollTrackingMixin'

export default {
  name: 'PropsPage',

  mixins: [scrollTrackingMixin],

  components: {
    KnowledgeCard,
    TipBox,
    DemoBox
  }
}
</script>

<style lang="scss" scoped>
.props-page {
  padding: 0 0 $spacing-2xl;
}

.page-header {
  text-align: center;
  margin-bottom: $spacing-xl;
  padding: $spacing-xl;
  background: linear-gradient(135deg, #11998e 0%, #38ef7d 100%);
  border-radius: $radius-lg;
  color: white;

  h1 {
    font-size: 28px;
    margin-bottom: $spacing-sm;
  }

  .subtitle {
    opacity: 0.9;
    font-size: $font-size-lg;
  }
}

.concept-content {
  .analogy {
    display: flex;
    gap: $spacing-md;
    padding: $spacing-md;
    background: $color-bg;
    border-radius: $radius-md;
    margin-bottom: $spacing-md;

    .emoji {
      font-size: 32px;
    }
  }

  .definition {
    color: $color-text-secondary;
    line-height: 1.8;

    strong {
      color: $color-text;
    }

    code {
      background: $color-code-bg;
      padding: 2px 6px;
      border-radius: $radius-sm;
      font-family: $font-family-code;
    }
  }
}

.flow-diagram {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: $spacing-sm;
  padding: $spacing-lg;
  margin-bottom: $spacing-md;

  .flow-parent, .flow-child {
    padding: $spacing-md $spacing-lg;
    border-radius: $radius-md;
    text-align: center;

    .label {
      display: block;
      font-weight: 600;
      margin-bottom: $spacing-xs;
    }

    code {
      font-family: $font-family-code;
      font-size: $font-size-sm;
    }
  }

  .flow-parent {
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    color: white;

    code {
      background: rgba(255,255,255,0.2);
      padding: 4px 8px;
      border-radius: $radius-sm;
    }
  }

  .flow-arrow {
    font-size: 24px;
  }

  .flow-child {
    background: linear-gradient(135deg, #11998e 0%, #38ef7d 100%);
    color: white;

    code {
      background: rgba(255,255,255,0.2);
      padding: 4px 8px;
      border-radius: $radius-sm;
    }
  }
}

.type-table {
  margin-bottom: $spacing-md;
  overflow-x: auto;

  table {
    width: 100%;
    border-collapse: collapse;
    font-size: $font-size-sm;

    th, td {
      padding: $spacing-sm $spacing-md;
      text-align: left;
      border-bottom: 1px solid $color-border;
    }

    th {
      background: $color-bg;
      font-weight: 600;
    }

    code {
      background: $color-code-bg;
      padding: 2px 6px;
      border-radius: $radius-sm;
      font-family: $font-family-code;
    }
  }
}

.practice-list {
  margin: 0;
  padding-left: $spacing-lg;

  li {
    margin-bottom: $spacing-sm;
    line-height: 1.6;

    &:last-child {
      margin-bottom: 0;
    }

    code {
      background: rgba(0,0,0,0.05);
      padding: 2px 6px;
      border-radius: $radius-sm;
      font-family: $font-family-code;
    }
  }
}
</style>

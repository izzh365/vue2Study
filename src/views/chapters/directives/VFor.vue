<template>
  <div class="directive-page v-for-page">
    <!-- é¡µé¢æ ‡é¢˜ -->
    <div class="page-header">
      <h1>ğŸ” v-for åˆ—è¡¨æ¸²æŸ“</h1>
      <p class="page-desc">éå†æ•°ç»„æˆ–å¯¹è±¡ï¼Œæ¸²æŸ“åˆ—è¡¨æ•°æ®</p>
    </div>

    <!-- æ¦‚å¿µè¯´æ˜ -->
    <KnowledgeCard title="ğŸ“– ä»€ä¹ˆæ˜¯åˆ—è¡¨æ¸²æŸ“ï¼Ÿ">
      <p>
        <strong>v-for</strong> æŒ‡ä»¤ç”¨äºæ ¹æ®æ•°ç»„æˆ–å¯¹è±¡çš„å†…å®¹ï¼Œå¾ªç¯æ¸²æŸ“ä¸€ç»„å…ƒç´ ã€‚
        è¿™æ˜¯å‰ç«¯å¼€å‘ä¸­æœ€å¸¸ç”¨çš„åŠŸèƒ½ä¹‹ä¸€ï¼Œå¦‚å•†å“åˆ—è¡¨ã€ç”¨æˆ·åˆ—è¡¨ã€è¯„è®ºåˆ—è¡¨ç­‰éƒ½éœ€è¦ç”¨åˆ°ã€‚
      </p>
      <div class="analogy-box">
        <span class="analogy-icon">ğŸ“‹</span>
        <div>
          <strong>é€šä¿—æ¯”å–»ï¼š</strong>å°±åƒå¤å°æœºä¸€æ ·ï¼Œæœ‰å¤šå°‘ä»½æ•°æ®ï¼Œå°±å¤åˆ¶å‡ºå¤šå°‘ä¸ªå…ƒç´ 
        </div>
      </div>
    </KnowledgeCard>

    <!-- è¯­æ³•æ ¼å¼ -->
    <KnowledgeCard title="ğŸ“ è¯­æ³•æ ¼å¼">
      <CodeBlock 
        :code="syntaxCode"
        language="html"
      />
    </KnowledgeCard>

    <!-- Demo å±•ç¤ºåŒº -->
    <KnowledgeCard title="ğŸ¯ å®æˆ˜ç¤ºä¾‹">
      <!-- Demo 1: åŸºç¡€ç”¨æ³• -->
      <div class="demo-section">
        <h4>Demo 1: éå†æ•°ç»„å’Œå¯¹è±¡</h4>
        <p class="demo-desc">v-for çš„åŸºæœ¬ç”¨æ³•ï¼Œéå†ä¸åŒç±»å‹çš„æ•°æ®</p>
        <DemoBox 
          demoPath="directives/v-for-basic"
          title="v-for åŸºç¡€ç”¨æ³•"
          height="750px"
        />
      </div>

      <!-- Demo 2: key çš„ä½œç”¨ -->
      <div class="demo-section">
        <h4>Demo 2: key çš„ä½œç”¨ï¼ˆé‡è¦ï¼ï¼‰</h4>
        <p class="demo-desc">ç†è§£ä¸ºä»€ä¹ˆå¿…é¡»ä½¿ç”¨ keyï¼Œä»¥åŠå¦‚ä½•æ­£ç¡®ä½¿ç”¨</p>
        <DemoBox 
          demoPath="directives/v-for-key"
          title="key çš„ä½œç”¨"
          height="720px"
        />
      </div>
    </KnowledgeCard>

    <!-- key çš„é‡è¦æ€§ -->
    <KnowledgeCard title="ğŸ”‘ ä¸ºä»€ä¹ˆéœ€è¦ keyï¼Ÿ">
      <div class="key-explanation">
        <div class="key-point">
          <span class="key-icon">1ï¸âƒ£</span>
          <div>
            <strong>å¸®åŠ© Vue è¯†åˆ«èŠ‚ç‚¹</strong>
            <p>key æ˜¯æ¯ä¸ªèŠ‚ç‚¹çš„å”¯ä¸€æ ‡è¯†ï¼Œå¸®åŠ© Vue çš„è™šæ‹Ÿ DOM ç®—æ³•å‡†ç¡®åœ°æ‰¾åˆ°å¯¹åº”èŠ‚ç‚¹</p>
          </div>
        </div>
        <div class="key-point">
          <span class="key-icon">2ï¸âƒ£</span>
          <div>
            <strong>æé«˜æ¸²æŸ“æ•ˆç‡</strong>
            <p>æœ‰äº† keyï¼ŒVue å¯ä»¥å¤ç”¨ç°æœ‰å…ƒç´ ï¼Œåªæ›´æ–°å¿…è¦çš„éƒ¨åˆ†ï¼Œè€Œä¸æ˜¯é‡æ–°æ¸²æŸ“æ•´ä¸ªåˆ—è¡¨</p>
          </div>
        </div>
        <div class="key-point">
          <span class="key-icon">3ï¸âƒ£</span>
          <div>
            <strong>é¿å…æ¸²æŸ“é”™è¯¯</strong>
            <p>æ²¡æœ‰ key æˆ–ä½¿ç”¨ index ä½œä¸º keyï¼Œåœ¨åˆ—è¡¨å˜åŒ–æ—¶å¯èƒ½å¯¼è‡´è¾“å…¥æ¡†å†…å®¹é”™ä½ç­‰é—®é¢˜</p>
          </div>
        </div>
      </div>
    </KnowledgeCard>

    <!-- æœ€ä½³å®è·µ -->
    <TipBox type="success" title="âœ… key çš„æœ€ä½³å®è·µ">
      <ul>
        <li><strong>æ¨èï¼š</strong>ä½¿ç”¨åç«¯è¿”å›çš„å”¯ä¸€ IDï¼ˆå¦‚ item.idï¼‰</li>
        <li><strong>æ¨èï¼š</strong>ä½¿ç”¨ UUID æˆ–å…¶ä»–å”¯ä¸€æ ‡è¯†ç¬¦</li>
        <li><strong>é¿å…ï¼š</strong>ä½¿ç”¨æ•°ç»„ç´¢å¼• indexï¼ˆé™¤éåˆ—è¡¨æ˜¯é™æ€ä¸å˜çš„ï¼‰</li>
        <li><strong>é¿å…ï¼š</strong>ä½¿ç”¨ Math.random() æˆ–æ—¶é—´æˆ³ï¼ˆæ¯æ¬¡æ¸²æŸ“éƒ½ä¼šå˜åŒ–ï¼‰</li>
      </ul>
    </TipBox>

    <TipBox type="warning" title="âš ï¸ æ³¨æ„äº‹é¡¹">
      <ul>
        <li>ä¸æ¨è v-for å’Œ v-if åŒæ—¶ç”¨åœ¨ä¸€ä¸ªå…ƒç´ ä¸Šï¼ˆv-for ä¼˜å…ˆçº§æ›´é«˜ï¼‰</li>
        <li>å¦‚éœ€è¿‡æ»¤åˆ—è¡¨ï¼Œè¯·ä½¿ç”¨<strong>è®¡ç®—å±æ€§</strong>å…ˆè¿‡æ»¤æ•°æ®</li>
        <li>éå†å¯¹è±¡æ—¶ï¼Œé¡ºåºæ˜¯ (value, key, index)</li>
      </ul>
    </TipBox>
  </div>
</template>

<script>
/**
 * v-for åˆ—è¡¨æ¸²æŸ“é¡µé¢
 */
import KnowledgeCard from '@/components/content/KnowledgeCard.vue'
import TipBox from '@/components/content/TipBox.vue'
import DemoBox from '@/components/demo/DemoBox.vue'
import CodeBlock from '@/components/demo/CodeBlock.vue'
import scrollTrackingMixin from '@/utils/scrollTrackingMixin'

export default {
  name: 'VFor',

  mixins: [scrollTrackingMixin],

  components: {
    KnowledgeCard,
    TipBox,
    DemoBox,
    CodeBlock
  },

  data() {
    return {
      syntaxCode: `<!-- éå†æ•°ç»„ -->
<li v-for="item in items" :key="item.id">
  {{ item.name }}
</li>

<!-- å¸¦ç´¢å¼• -->
<li v-for="(item, index) in items" :key="item.id">
  {{ index }}: {{ item.name }}
</li>

<!-- éå†å¯¹è±¡ -->
<div v-for="(value, key, index) in object" :key="key">
  {{ index }}. {{ key }}: {{ value }}
</div>

<!-- éå†æ•°å­— -->
<span v-for="n in 10" :key="n">{{ n }}</span>`
    }
  }
}
</script>

<style lang="scss" scoped>
.v-for-page {
  .page-header {
    margin-bottom: $spacing-xl;
    
    h1 {
      font-size: 28px;
      margin-bottom: $spacing-sm;
    }
    
    .page-desc {
      color: $color-text-secondary;
      font-size: 16px;
    }
  }

  .analogy-box {
    display: flex;
    align-items: flex-start;
    gap: $spacing-md;
    padding: $spacing-md;
    background: rgba($color-primary, 0.05);
    border-radius: $radius-md;
    margin-top: $spacing-md;

    .analogy-icon {
      font-size: 24px;
    }
  }

  .demo-section {
    margin-bottom: $spacing-xl;

    h4 {
      font-size: 16px;
      margin-bottom: $spacing-xs;
    }

    .demo-desc {
      color: $color-text-secondary;
      font-size: 14px;
      margin-bottom: $spacing-md;
    }
  }

  .key-explanation {
    .key-point {
      display: flex;
      align-items: flex-start;
      gap: $spacing-md;
      padding: $spacing-md;
      background: $color-bg;
      border-radius: $radius-md;
      margin-bottom: $spacing-sm;

      .key-icon {
        font-size: 20px;
      }

      strong {
        display: block;
        margin-bottom: 4px;
      }

      p {
        font-size: 14px;
        color: $color-text-secondary;
        margin: 0;
      }
    }
  }
}
</style>

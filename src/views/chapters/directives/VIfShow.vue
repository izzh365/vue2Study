<template>
  <div class="directive-page v-if-show-page">
    <!-- é¡µé¢æ ‡é¢˜ -->
    <div class="page-header">
      <h1>ğŸ”€ v-if / v-show æ¡ä»¶æ¸²æŸ“</h1>
      <p class="page-desc">æ ¹æ®æ¡ä»¶æ§åˆ¶å…ƒç´ çš„æ˜¾ç¤ºä¸éšè—</p>
    </div>

    <!-- æ¦‚å¿µè¯´æ˜ -->
    <KnowledgeCard title="ğŸ“– æ¡ä»¶æ¸²æŸ“æ˜¯ä»€ä¹ˆï¼Ÿ">
      <p>
        æ¡ä»¶æ¸²æŸ“è®©æˆ‘ä»¬å¯ä»¥æ ¹æ®æ•°æ®çš„çœŸå‡å€¼æ¥æ§åˆ¶å…ƒç´ æ˜¯å¦æ˜¾ç¤ºã€‚
        Vue æä¾›äº†ä¸¤ç§æ–¹å¼ï¼š<strong>v-if</strong> å’Œ <strong>v-show</strong>ã€‚
      </p>
      <div class="compare-cards">
        <div class="compare-card if-card">
          <h4>v-if</h4>
          <p>çœŸæ­£çš„æ¡ä»¶æ¸²æŸ“</p>
          <p>æ¡ä»¶ä¸º false æ—¶ï¼Œå…ƒç´ <strong>ä¸å­˜åœ¨äº DOM</strong></p>
        </div>
        <div class="compare-card show-card">
          <h4>v-show</h4>
          <p>CSS æ˜¾éšæ§åˆ¶</p>
          <p>æ¡ä»¶ä¸º false æ—¶ï¼Œå…ƒç´ ä»åœ¨ DOMï¼Œåªæ˜¯ <strong>display: none</strong></p>
        </div>
      </div>
    </KnowledgeCard>

    <!-- Demo å±•ç¤ºåŒº -->
    <KnowledgeCard title="ğŸ¯ å®æˆ˜ç¤ºä¾‹">
      <!-- Demo 1: v-if åŸºç¡€ -->
      <div class="demo-section">
        <h4>Demo 1: v-if / v-else-if / v-else</h4>
        <p class="demo-desc">æ¡ä»¶åˆ†æ”¯æ¸²æŸ“ï¼Œæ ¹æ®æ¡ä»¶æ˜¾ç¤ºä¸åŒå†…å®¹</p>
        <DemoBox 
          demoPath="directives/v-if-basic"
          title="v-if æ¡ä»¶æ¸²æŸ“"
          height="720px"
        />
      </div>

      <!-- Demo 2: v-if vs v-show -->
      <div class="demo-section">
        <h4>Demo 2: v-if vs v-show å¯¹æ¯”</h4>
        <p class="demo-desc">è§‚å¯Ÿ DOM å˜åŒ–ï¼Œç†è§£ä¸¤è€…çš„æ ¸å¿ƒåŒºåˆ«</p>
        <DemoBox 
          demoPath="directives/v-if-vs-show"
          title="v-if vs v-show"
          height="680px"
        />
      </div>
    </KnowledgeCard>

    <!-- å¯¹æ¯”è¡¨æ ¼ -->
    <KnowledgeCard title="ğŸ“Š v-if vs v-show å¯¹æ¯”">
      <div class="compare-table">
        <div class="compare-row header">
          <div class="compare-cell"></div>
          <div class="compare-cell if">v-if</div>
          <div class="compare-cell show">v-show</div>
        </div>
        <div class="compare-row">
          <div class="compare-cell label">æ¸²æŸ“æ–¹å¼</div>
          <div class="compare-cell">æ¡ä»¶å‡æ—¶ä¸æ¸²æŸ“ DOM</div>
          <div class="compare-cell">å§‹ç»ˆæ¸²æŸ“ï¼Œç”¨ CSS éšè—</div>
        </div>
        <div class="compare-row">
          <div class="compare-cell label">åˆ‡æ¢å¼€é”€</div>
          <div class="compare-cell">è¾ƒé«˜ï¼ˆé”€æ¯/é‡å»º DOMï¼‰</div>
          <div class="compare-cell">è¾ƒä½ï¼ˆCSS åˆ‡æ¢ï¼‰</div>
        </div>
        <div class="compare-row">
          <div class="compare-cell label">åˆå§‹å¼€é”€</div>
          <div class="compare-cell">æ¡ä»¶å‡æ—¶æ— å¼€é”€</div>
          <div class="compare-cell">å§‹ç»ˆæœ‰æ¸²æŸ“å¼€é”€</div>
        </div>
        <div class="compare-row">
          <div class="compare-cell label">é€‚ç”¨åœºæ™¯</div>
          <div class="compare-cell">æ¡ä»¶å¾ˆå°‘æ”¹å˜</div>
          <div class="compare-cell">é¢‘ç¹åˆ‡æ¢</div>
        </div>
        <div class="compare-row">
          <div class="compare-cell label">æ”¯æŒ v-else</div>
          <div class="compare-cell">âœ“ æ”¯æŒ</div>
          <div class="compare-cell">âœ— ä¸æ”¯æŒ</div>
        </div>
      </div>
    </KnowledgeCard>

    <!-- ä½¿ç”¨å»ºè®® -->
    <TipBox type="success" title="âœ… å¦‚ä½•é€‰æ‹©ï¼Ÿ">
      <ul>
        <li><strong>ä½¿ç”¨ v-ifï¼š</strong>æ¡ä»¶å¾ˆå°‘æ”¹å˜ã€éœ€è¦ v-else åˆ†æ”¯ã€åˆå§‹æ¡ä»¶ä¸º false æ—¶</li>
        <li><strong>ä½¿ç”¨ v-showï¼š</strong>éœ€è¦é¢‘ç¹åˆ‡æ¢æ˜¾ç¤ºçŠ¶æ€ã€Tab åˆ‡æ¢ã€æŠ˜å é¢æ¿ç­‰</li>
      </ul>
    </TipBox>

    <TipBox type="warning" title="âš ï¸ æ³¨æ„äº‹é¡¹">
      <ul>
        <li>v-if å¯ä»¥ç”¨åœ¨ <code>&lt;template&gt;</code> ä¸Šï¼Œv-show ä¸è¡Œ</li>
        <li>v-elseã€v-else-if å¿…é¡»ç´§è·Ÿåœ¨ v-if åé¢</li>
        <li>ä¸æ¨è v-if å’Œ v-for åŒæ—¶ç”¨åœ¨åŒä¸€ä¸ªå…ƒç´ ä¸Š</li>
      </ul>
    </TipBox>
  </div>
</template>

<script>
/**
 * v-if / v-show æ¡ä»¶æ¸²æŸ“é¡µé¢
 */
import KnowledgeCard from '@/components/content/KnowledgeCard.vue'
import TipBox from '@/components/content/TipBox.vue'
import DemoBox from '@/components/demo/DemoBox.vue'
import scrollTrackingMixin from '@/utils/scrollTrackingMixin'

export default {
  name: 'VIfShow',

  mixins: [scrollTrackingMixin],

  components: {
    KnowledgeCard,
    TipBox,
    DemoBox
  }
}
</script>

<style lang="scss" scoped>
.v-if-show-page {
  .page-header {
    margin-bottom: $spacing-xl;
    
    h1 {
      font-size: 28px;
      margin-bottom: $spacing-sm;
    }
    
    .page-desc {
      color: $color-text-secondary;
      font-size: 16px;
    }
  }

  .compare-cards {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: $spacing-md;
    margin-top: $spacing-lg;

    .compare-card {
      padding: $spacing-lg;
      border-radius: $radius-md;
      text-align: center;

      h4 {
        font-size: 18px;
        margin-bottom: $spacing-sm;
      }

      p {
        font-size: 14px;
        margin: 4px 0;
        color: $color-text-secondary;
      }

      &.if-card {
        background: rgba($color-primary, 0.1);
        border: 2px solid $color-primary;

        h4 { color: $color-primary; }
      }

      &.show-card {
        background: rgba($color-success, 0.1);
        border: 2px solid $color-success;

        h4 { color: $color-success; }
      }
    }
  }

  .demo-section {
    margin-bottom: $spacing-xl;

    h4 {
      font-size: 16px;
      margin-bottom: $spacing-xs;
    }

    .demo-desc {
      color: $color-text-secondary;
      font-size: 14px;
      margin-bottom: $spacing-md;
    }
  }

  .compare-table {
    border-radius: $radius-md;
    overflow: hidden;
    border: 1px solid $color-border;

    .compare-row {
      display: grid;
      grid-template-columns: 1fr 1.5fr 1.5fr;

      &.header {
        background: $color-bg;

        .compare-cell {
          font-weight: 600;
          font-size: 15px;

          &.if { color: $color-primary; }
          &.show { color: $color-success; }
        }
      }

      .compare-cell {
        padding: $spacing-sm $spacing-md;
        border-bottom: 1px solid $color-border;
        font-size: 14px;

        &.label {
          background: $color-bg;
          font-weight: 500;
          color: $color-text-secondary;
        }
      }

      &:last-child .compare-cell {
        border-bottom: none;
      }
    }
  }
}
</style>

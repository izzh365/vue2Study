<template>
  <div class="directive-page v-on-page">
    <!-- é¡µé¢æ ‡é¢˜ -->
    <div class="page-header">
      <h1>ğŸ–±ï¸ v-on äº‹ä»¶ç»‘å®š</h1>
      <p class="page-desc">ç›‘å¬ DOM äº‹ä»¶ï¼Œå®ç°ç”¨æˆ·äº¤äº’</p>
    </div>

    <!-- æ¦‚å¿µè¯´æ˜ -->
    <KnowledgeCard title="ğŸ“– ä»€ä¹ˆæ˜¯ v-onï¼Ÿ">
      <p>
        <strong>v-on</strong> æŒ‡ä»¤ç”¨äºç›‘å¬ DOM äº‹ä»¶ã€‚
        ç”¨æˆ·ç‚¹å‡»æŒ‰é’®ã€è¾“å…¥æ–‡å­—ã€ç§»åŠ¨é¼ æ ‡ç­‰æ“ä½œéƒ½ä¼šè§¦å‘äº‹ä»¶ï¼Œv-on è®©æˆ‘ä»¬å¯ä»¥å“åº”è¿™äº›äº‹ä»¶ã€‚
      </p>
      <div class="analogy-box">
        <span class="analogy-icon">ğŸ“±</span>
        <div>
          <strong>é€šä¿—æ¯”å–»ï¼š</strong>å°±åƒæ‰‹æœºçš„è§¦å±ä¸€æ ·ï¼Œä½ ç‚¹å‡»å“ªé‡Œï¼Œæ‰‹æœºå°±å“åº”å“ªé‡Œã€‚v-on å°±æ˜¯è¿™ä¸ª"è§¦å±"æœºåˆ¶
        </div>
      </div>
    </KnowledgeCard>

    <!-- è¯­æ³•æ ¼å¼ -->
    <KnowledgeCard title="ğŸ“ è¯­æ³•æ ¼å¼">
      <div class="syntax-table">
        <div class="syntax-row">
          <div class="syntax-label">å®Œæ•´å†™æ³•</div>
          <div class="syntax-code"><code>v-on:äº‹ä»¶="è¡¨è¾¾å¼"</code></div>
        </div>
        <div class="syntax-row highlight">
          <div class="syntax-label">ç®€å†™ï¼ˆæ¨èï¼‰</div>
          <div class="syntax-code"><code>@äº‹ä»¶="è¡¨è¾¾å¼"</code></div>
        </div>
      </div>
      <CodeBlock 
        :code="syntaxCode"
        language="html"
      />
    </KnowledgeCard>

    <!-- Demo å±•ç¤ºåŒº -->
    <KnowledgeCard title="ğŸ¯ å®æˆ˜ç¤ºä¾‹">
      <!-- Demo 1: åŸºç¡€ç”¨æ³• -->
      <div class="demo-section">
        <h4>Demo 1: äº‹ä»¶ç»‘å®šåŸºç¡€</h4>
        <p class="demo-desc">åŸºæœ¬ç‚¹å‡»äº‹ä»¶å’Œæ–¹æ³•è°ƒç”¨</p>
        <DemoBox 
          demoPath="directives/v-on-basic"
          title="v-on åŸºç¡€ç”¨æ³•"
          height="580px"
        />
      </div>

      <!-- Demo 2: ä¼ é€’å‚æ•° -->
      <div class="demo-section">
        <h4>Demo 2: ä¼ é€’å‚æ•°</h4>
        <p class="demo-desc">å‘æ–¹æ³•ä¼ é€’è‡ªå®šä¹‰å‚æ•°</p>
        <DemoBox 
          demoPath="directives/v-on-params"
          title="v-on ä¼ é€’å‚æ•°"
          height="650px"
        />
      </div>

      <!-- Demo 3: $event å¯¹è±¡ -->
      <div class="demo-section">
        <h4>Demo 3: $event äº‹ä»¶å¯¹è±¡</h4>
        <p class="demo-desc">è·å–åŸç”Ÿ DOM äº‹ä»¶å¯¹è±¡ï¼Œè¿½è¸ªé¼ æ ‡ä½ç½®</p>
        <DemoBox 
          demoPath="directives/v-on-event"
          title="$event äº‹ä»¶å¯¹è±¡"
          height="720px"
        />
      </div>

      <!-- Demo 4: äº‹ä»¶ä¿®é¥°ç¬¦ -->
      <div class="demo-section">
        <h4>Demo 4: äº‹ä»¶ä¿®é¥°ç¬¦</h4>
        <p class="demo-desc">.stopã€.preventã€.onceã€æŒ‰é”®ä¿®é¥°ç¬¦ç­‰</p>
        <DemoBox 
          demoPath="directives/v-on-modifiers"
          title="äº‹ä»¶ä¿®é¥°ç¬¦"
          height="800px"
        />
      </div>
    </KnowledgeCard>

    <!-- ä¿®é¥°ç¬¦æ€»ç»“ -->
    <KnowledgeCard title="ğŸ›ï¸ å¸¸ç”¨ä¿®é¥°ç¬¦">
      <div class="modifier-grid">
        <div class="modifier-category">
          <h5>äº‹ä»¶ä¿®é¥°ç¬¦</h5>
          <div class="modifier-list">
            <span class="modifier-badge">.stop</span>
            <span class="modifier-desc">é˜»æ­¢äº‹ä»¶å†’æ³¡</span>
          </div>
          <div class="modifier-list">
            <span class="modifier-badge">.prevent</span>
            <span class="modifier-desc">é˜»æ­¢é»˜è®¤è¡Œä¸º</span>
          </div>
          <div class="modifier-list">
            <span class="modifier-badge">.once</span>
            <span class="modifier-desc">åªè§¦å‘ä¸€æ¬¡</span>
          </div>
          <div class="modifier-list">
            <span class="modifier-badge">.self</span>
            <span class="modifier-desc">åªå½“ target æ˜¯è‡ªèº«æ—¶è§¦å‘</span>
          </div>
        </div>
        <div class="modifier-category">
          <h5>æŒ‰é”®ä¿®é¥°ç¬¦</h5>
          <div class="modifier-list">
            <span class="modifier-badge">.enter</span>
            <span class="modifier-badge">.tab</span>
            <span class="modifier-badge">.esc</span>
          </div>
          <div class="modifier-list">
            <span class="modifier-badge">.space</span>
            <span class="modifier-badge">.delete</span>
          </div>
          <div class="modifier-list">
            <span class="modifier-badge">.up</span>
            <span class="modifier-badge">.down</span>
            <span class="modifier-badge">.left</span>
            <span class="modifier-badge">.right</span>
          </div>
        </div>
      </div>
    </KnowledgeCard>

    <!-- æ³¨æ„äº‹é¡¹ -->
    <TipBox type="info" title="ğŸ’¡ ä½¿ç”¨æŠ€å·§">
      <ul>
        <li>æ–¹æ³•åå<strong>ä¸åŠ æ‹¬å·</strong>ï¼šäº‹ä»¶å¯¹è±¡è‡ªåŠ¨ä½œä¸ºç¬¬ä¸€ä¸ªå‚æ•°ä¼ å…¥</li>
        <li>æ–¹æ³•åå<strong>åŠ æ‹¬å·</strong>ï¼šéœ€è¦æ‰‹åŠ¨ä¼ é€’ <code>$event</code></li>
        <li>ä¿®é¥°ç¬¦å¯ä»¥<strong>é“¾å¼è°ƒç”¨</strong>ï¼š<code>@click.stop.prevent</code></li>
      </ul>
    </TipBox>
  </div>
</template>

<script>
/**
 * v-on äº‹ä»¶ç»‘å®šé¡µé¢
 */
import KnowledgeCard from '@/components/content/KnowledgeCard.vue'
import TipBox from '@/components/content/TipBox.vue'
import DemoBox from '@/components/demo/DemoBox.vue'
import CodeBlock from '@/components/demo/CodeBlock.vue'

export default {
  name: 'VOn',

  components: {
    KnowledgeCard,
    TipBox,
    DemoBox,
    CodeBlock
  },

  data() {
    return {
      syntaxCode: `<!-- å®Œæ•´å†™æ³• -->
<button v-on:click="handleClick">ç‚¹å‡»</button>

<!-- ç®€å†™æ–¹å¼ï¼ˆæ¨èï¼‰ -->
<button @click="handleClick">ç‚¹å‡»</button>

<!-- å†…è”è¡¨è¾¾å¼ -->
<button @click="count++">+1</button>

<!-- ä¼ é€’å‚æ•° -->
<button @click="greet('Hello')">é—®å€™</button>

<!-- ä¼ é€’äº‹ä»¶å¯¹è±¡ -->
<button @click="handleClick($event)">å¸¦äº‹ä»¶</button>

<!-- ä½¿ç”¨ä¿®é¥°ç¬¦ -->
<form @submit.prevent="onSubmit">
<a @click.stop="onClick"></a>
<input @keyup.enter="onEnter">`
    }
  }
}
</script>

<style lang="scss" scoped>
.v-on-page {
  .page-header {
    margin-bottom: $spacing-xl;
    
    h1 {
      font-size: 28px;
      margin-bottom: $spacing-sm;
    }
    
    .page-desc {
      color: $color-text-secondary;
      font-size: 16px;
    }
  }

  .analogy-box {
    display: flex;
    align-items: flex-start;
    gap: $spacing-md;
    padding: $spacing-md;
    background: rgba($color-primary, 0.05);
    border-radius: $radius-md;
    margin-top: $spacing-md;

    .analogy-icon {
      font-size: 24px;
    }
  }

  .syntax-table {
    margin-bottom: $spacing-md;

    .syntax-row {
      display: flex;
      align-items: center;
      padding: $spacing-sm $spacing-md;
      border-radius: $radius-sm;

      &.highlight {
        background: rgba($color-success, 0.1);
      }

      .syntax-label {
        width: 120px;
        color: $color-text-secondary;
        font-size: 14px;
      }

      .syntax-code {
        code {
          font-family: $font-family-code;
          font-size: 15px;
          color: $color-primary;
        }
      }
    }
  }

  .demo-section {
    margin-bottom: $spacing-xl;

    h4 {
      font-size: 16px;
      margin-bottom: $spacing-xs;
    }

    .demo-desc {
      color: $color-text-secondary;
      font-size: 14px;
      margin-bottom: $spacing-md;
    }
  }

  .modifier-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
    gap: $spacing-lg;

    .modifier-category {
      h5 {
        font-size: 14px;
        color: $color-text-secondary;
        margin-bottom: $spacing-sm;
      }

      .modifier-list {
        display: flex;
        flex-wrap: wrap;
        align-items: center;
        gap: $spacing-xs;
        margin-bottom: $spacing-sm;

        .modifier-badge {
          display: inline-block;
          padding: 4px 10px;
          background: $color-primary;
          color: white;
          border-radius: 20px;
          font-size: 12px;
          font-family: $font-family-code;
        }

        .modifier-desc {
          font-size: 13px;
          color: $color-text-secondary;
        }
      }
    }
  }
}
</style>

<template>
  <div class="knowledge-page">
    <!-- é¡µé¢æ ‡é¢˜ -->
    <div class="page-header">
      <h1>ğŸ“¦ const ä¸ let</h1>
      <p class="subtitle">ES6 å˜é‡å£°æ˜çš„æ–°æ–¹å¼ï¼Œå‘Šåˆ« var çš„å„ç§å‘</p>
    </div>

    <!-- 1. æ¦‚å¿µè¯´æ˜ -->
    <KnowledgeCard title="ğŸ“– æ¦‚å¿µè¯´æ˜ï¼ˆæ˜¯ä»€ä¹ˆï¼‰">
      <div class="concept-content">
        <h4>ğŸ¯ é€šä¿—æ¯”å–»</h4>
        <p>æƒ³è±¡ä½ æœ‰ä¸‰ç§ä¸åŒçš„ç›’å­ï¼š</p>
        <ul>
          <li><strong>var ç›’å­</strong>ï¼šåƒä¸€ä¸ªåˆ°å¤„ä¹±è·‘çš„ç›’å­ï¼Œä½ æ”¾åœ¨æˆ¿é—´é‡Œï¼Œå®ƒå¯èƒ½è·‘åˆ°å®¢å…å»</li>
          <li><strong>let ç›’å­</strong>ï¼šä¹–ä¹–å¾…åœ¨ä½ æ”¾å®ƒçš„åœ°æ–¹ï¼Œä¸ä¼šä¹±è·‘</li>
          <li><strong>const ç›’å­</strong>ï¼šä¸ä»…ä¸ä¹±è·‘ï¼Œè€Œä¸”é”æ­»äº†ï¼Œé‡Œé¢çš„ä¸œè¥¿ä¸èƒ½æ¢</li>
        </ul>
        
        <h4>ğŸ“š å®˜æ–¹å®šä¹‰</h4>
        <ul>
          <li><code>let</code>ï¼šå£°æ˜å—çº§ä½œç”¨åŸŸçš„å˜é‡ï¼Œå¯ä»¥é‡æ–°èµ‹å€¼</li>
          <li><code>const</code>ï¼šå£°æ˜å—çº§ä½œç”¨åŸŸçš„å¸¸é‡ï¼Œä¸å¯é‡æ–°èµ‹å€¼</li>
        </ul>
      </div>
    </KnowledgeCard>

    <!-- 2. ä¸ºä»€ä¹ˆéœ€è¦ -->
    <KnowledgeCard title="ğŸ’¡ ä¸ºä»€ä¹ˆéœ€è¦ let å’Œ const">
      <div class="why-content">
        <h4>ğŸ˜± var çš„é—®é¢˜</h4>
        <ul>
          <li><strong>å˜é‡æå‡</strong>ï¼šå˜é‡å¯ä»¥åœ¨å£°æ˜å‰ä½¿ç”¨ï¼Œå®¹æ˜“é€ æˆå›°æƒ‘</li>
          <li><strong>æ²¡æœ‰å—çº§ä½œç”¨åŸŸ</strong>ï¼šåœ¨ if/for ä¸­å£°æ˜çš„å˜é‡ä¼šæ³„æ¼åˆ°å¤–éƒ¨</li>
          <li><strong>å¯ä»¥é‡å¤å£°æ˜</strong>ï¼šå®¹æ˜“ä¸å°å¿ƒè¦†ç›–å·²æœ‰å˜é‡</li>
        </ul>
        
        <h4>âœ… let/const è§£å†³çš„é—®é¢˜</h4>
        <ul>
          <li>æœ‰å—çº§ä½œç”¨åŸŸï¼Œå˜é‡ä¸ä¼šæ³„æ¼</li>
          <li>ä¸èƒ½é‡å¤å£°æ˜ï¼Œé¿å…æ„å¤–è¦†ç›–</li>
          <li>æš‚æ—¶æ€§æ­»åŒºï¼ˆTDZï¼‰ï¼Œå¿…é¡»å…ˆå£°æ˜åä½¿ç”¨</li>
        </ul>
      </div>
    </KnowledgeCard>

    <!-- 3. è¯­æ³•å¯¹æ¯” -->
    <KnowledgeCard title="ğŸ“ è¯­æ³•å¯¹æ¯”">
      <CodeBlock :code="syntaxCode" language="javascript" />
    </KnowledgeCard>

    <!-- Demo åˆ—è¡¨ -->
    <h2 class="section-title">ğŸ¯ å®æˆ˜æ¼”ç¤º</h2>

    <!-- Demo 1: var å˜é‡æå‡ -->
    <KnowledgeCard title="Demo 1ï¼švar å˜é‡æå‡é—®é¢˜">
      <p class="demo-desc">var å£°æ˜çš„å˜é‡ä¼šè¢«æå‡åˆ°ä½œç”¨åŸŸé¡¶éƒ¨ï¼Œå¯ä»¥åœ¨å£°æ˜å‰è®¿é—®ï¼ˆå€¼ä¸º undefinedï¼‰</p>
      <DemoBox 
        demoPath="es6/var-hoisting"
        title="var å˜é‡æå‡"
        :height="280"
      />
    </KnowledgeCard>

    <!-- Demo 2: let å—çº§ä½œç”¨åŸŸ -->
    <KnowledgeCard title="Demo 2ï¼šlet å—çº§ä½œç”¨åŸŸ">
      <p class="demo-desc">let å£°æ˜çš„å˜é‡åªåœ¨å½“å‰ä»£ç å— {} å†…æœ‰æ•ˆ</p>
      <DemoBox 
        demoPath="es6/let-block-scope"
        title="let å—çº§ä½œç”¨åŸŸ"
        :height="280"
      />
    </KnowledgeCard>

    <!-- Demo 3: let åœ¨å¾ªç¯ä¸­ -->
    <KnowledgeCard title="Demo 3ï¼šlet åœ¨ for å¾ªç¯ä¸­ï¼ˆç»å…¸é¢è¯•é¢˜ï¼‰">
      <p class="demo-desc">è¿™æ˜¯ä¸€ä¸ªç»å…¸çš„é—­åŒ…é—®é¢˜ï¼Œlet å®Œç¾è§£å†³äº† var åœ¨å¾ªç¯ä¸­çš„é—®é¢˜</p>
      <DemoBox 
        demoPath="es6/let-loop"
        title="let è§£å†³å¾ªç¯é—®é¢˜"
        :height="320"
      />
    </KnowledgeCard>

    <!-- Demo 4: const åŸºæœ¬ç”¨æ³• -->
    <KnowledgeCard title="Demo 4ï¼šconst å¸¸é‡å£°æ˜">
      <p class="demo-desc">const å£°æ˜çš„å¸¸é‡å¿…é¡»åˆå§‹åŒ–ï¼Œä¸”ä¸èƒ½é‡æ–°èµ‹å€¼</p>
      <DemoBox 
        demoPath="es6/const-basic"
        title="const åŸºæœ¬ç”¨æ³•"
        :height="280"
      />
    </KnowledgeCard>

    <!-- Demo 5: const å¼•ç”¨ç±»å‹ -->
    <KnowledgeCard title="Demo 5ï¼šconst ä¸å¼•ç”¨ç±»å‹">
      <p class="demo-desc">const é”å®šçš„æ˜¯å˜é‡çš„å¼•ç”¨åœ°å€ï¼Œå¯¹è±¡çš„å±æ€§ä»å¯ä¿®æ”¹</p>
      <DemoBox 
        demoPath="es6/const-reference"
        title="const å¼•ç”¨ç±»å‹"
        :height="300"
      />
    </KnowledgeCard>

    <!-- Demo 6: æš‚æ—¶æ€§æ­»åŒº -->
    <KnowledgeCard title="Demo 6ï¼šæš‚æ—¶æ€§æ­»åŒºï¼ˆTDZï¼‰">
      <p class="demo-desc">let/const å­˜åœ¨æš‚æ—¶æ€§æ­»åŒºï¼Œåœ¨å£°æ˜å‰è®¿é—®ä¼šæŠ¥é”™</p>
      <DemoBox 
        demoPath="es6/tdz"
        title="æš‚æ—¶æ€§æ­»åŒº"
        :height="280"
      />
    </KnowledgeCard>

    <!-- æ³¨æ„äº‹é¡¹ -->
    <TipBox type="warning" title="âš ï¸ ä½¿ç”¨å»ºè®®">
      <ul>
        <li><strong>ä¼˜å…ˆä½¿ç”¨ const</strong>ï¼šå¦‚æœå˜é‡ä¸éœ€è¦é‡æ–°èµ‹å€¼ï¼Œç”¨ const</li>
        <li><strong>éœ€è¦æ”¹å˜æ—¶ç”¨ let</strong>ï¼šå¾ªç¯å˜é‡ã€ç´¯åŠ å™¨ç­‰éœ€è¦æ”¹å˜çš„ç”¨ let</li>
        <li><strong>ä¸è¦å†ç”¨ var</strong>ï¼šES6 é¡¹ç›®ä¸­åº”è¯¥å®Œå…¨é¿å…ä½¿ç”¨ var</li>
      </ul>
    </TipBox>

    <!-- å¯¹æ¯”è¡¨æ ¼ -->
    <KnowledgeCard title="ğŸ“Š var / let / const å¯¹æ¯”">
      <table class="compare-table">
        <thead>
          <tr>
            <th>ç‰¹æ€§</th>
            <th>var</th>
            <th>let</th>
            <th>const</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td>ä½œç”¨åŸŸ</td>
            <td>å‡½æ•°ä½œç”¨åŸŸ</td>
            <td>å—çº§ä½œç”¨åŸŸ</td>
            <td>å—çº§ä½œç”¨åŸŸ</td>
          </tr>
          <tr>
            <td>å˜é‡æå‡</td>
            <td>âœ… æœ‰</td>
            <td>âŒ æ— ï¼ˆTDZï¼‰</td>
            <td>âŒ æ— ï¼ˆTDZï¼‰</td>
          </tr>
          <tr>
            <td>é‡å¤å£°æ˜</td>
            <td>âœ… å¯ä»¥</td>
            <td>âŒ ä¸å¯ä»¥</td>
            <td>âŒ ä¸å¯ä»¥</td>
          </tr>
          <tr>
            <td>é‡æ–°èµ‹å€¼</td>
            <td>âœ… å¯ä»¥</td>
            <td>âœ… å¯ä»¥</td>
            <td>âŒ ä¸å¯ä»¥</td>
          </tr>
          <tr>
            <td>å¿…é¡»åˆå§‹åŒ–</td>
            <td>âŒ ä¸å¿…é¡»</td>
            <td>âŒ ä¸å¿…é¡»</td>
            <td>âœ… å¿…é¡»</td>
          </tr>
        </tbody>
      </table>
    </KnowledgeCard>
  </div>
</template>

<script>
/**
 * @description const ä¸ let çŸ¥è¯†ç‚¹é¡µé¢
 * @author Vue2 Learning Project
 */
import KnowledgeCard from '@/components/content/KnowledgeCard.vue'
import TipBox from '@/components/content/TipBox.vue'
import CodeBlock from '@/components/demo/CodeBlock.vue'
import DemoBox from '@/components/demo/DemoBox.vue'
import scrollTrackingMixin from '@/utils/scrollTrackingMixin'

export default {
  name: 'ConstLet',
  
  mixins: [scrollTrackingMixin],
  
  components: {
    KnowledgeCard,
    TipBox,
    CodeBlock,
    DemoBox
  },
  
  data() {
    return {
      // è¯­æ³•å¯¹æ¯”ä»£ç 
      syntaxCode: `// ==================== varï¼ˆä¸æ¨èï¼‰====================
var name = 'å¼ ä¸‰'
var name = 'æå››'  // å¯ä»¥é‡å¤å£°æ˜
name = 'ç‹äº”'      // å¯ä»¥é‡æ–°èµ‹å€¼

// ==================== letï¼ˆæ¨èç”¨äºå¯å˜å˜é‡ï¼‰====================
let age = 18
// let age = 20    // âŒ æŠ¥é”™ï¼šä¸èƒ½é‡å¤å£°æ˜
age = 20           // âœ… å¯ä»¥é‡æ–°èµ‹å€¼

// ==================== constï¼ˆæ¨èç”¨äºå¸¸é‡ï¼‰====================
const PI = 3.14159
// PI = 3.14       // âŒ æŠ¥é”™ï¼šä¸èƒ½é‡æ–°èµ‹å€¼
// const EMPTY     // âŒ æŠ¥é”™ï¼šå¿…é¡»åˆå§‹åŒ–

// const å¯¹è±¡çš„å±æ€§å¯ä»¥ä¿®æ”¹
const user = { name: 'å¼ ä¸‰' }
user.name = 'æå››'  // âœ… å¯ä»¥ä¿®æ”¹å±æ€§
// user = {}        // âŒ ä¸èƒ½é‡æ–°èµ‹å€¼`
    }
  }
}
</script>

<style lang="scss" scoped>
.knowledge-page {
  max-width: 900px;
  margin: 0 auto;
}

.page-header {
  margin-bottom: $spacing-xl;
  
  h1 {
    font-size: $font-size-3xl;
    margin-bottom: $spacing-sm;
  }
  
  .subtitle {
    color: $color-text-secondary;
    font-size: $font-size-lg;
  }
}

.section-title {
  font-size: $font-size-xl;
  margin: $spacing-xl 0 $spacing-lg;
  padding-bottom: $spacing-sm;
  border-bottom: 2px solid $color-primary;
}

.demo-desc {
  color: $color-text-secondary;
  margin-bottom: $spacing-md;
}

.concept-content,
.why-content {
  h4 {
    color: $color-primary;
    margin: $spacing-md 0 $spacing-sm;
    
    &:first-child {
      margin-top: 0;
    }
  }
  
  ul {
    padding-left: $spacing-lg;
    
    li {
      margin-bottom: $spacing-xs;
      line-height: 1.8;
    }
  }
  
  code {
    background: $color-code-bg;
    padding: 2px 6px;
    border-radius: 4px;
    font-family: $font-family-code;
    color: $color-primary;
  }
}

.compare-table {
  width: 100%;
  border-collapse: collapse;
  
  th, td {
    padding: $spacing-sm $spacing-md;
    text-align: center;
    border: 1px solid $color-border;
  }
  
  th {
    background: $color-bg;
    font-weight: 600;
  }
  
  td:first-child {
    text-align: left;
    font-weight: 500;
  }
}
</style>

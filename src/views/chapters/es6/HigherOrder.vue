<template>
  <div class="knowledge-page">
    <!-- é¡µé¢æ ‡é¢˜ -->
    <div class="page-header">
      <h1>ğŸš€ é«˜é˜¶å‡½æ•°</h1>
      <p class="subtitle">filterã€mapã€reduce æ˜¯æ•°ç»„å¤„ç†çš„ä¸‰å‰‘å®¢ï¼ŒVue å¼€å‘å¿…å¤‡æŠ€èƒ½ï¼</p>
    </div>

    <!-- é€šä¿—æ¯”å–»ç›’å­ -->
    <div class="analogy-box">
      <div class="analogy-icon">ğŸ</div>
      <div class="analogy-content">
        <h4>è‹¹æœå·¥å‚æµæ°´çº¿</h4>
        <p>æƒ³è±¡ä½ æœ‰ä¸€ç­è‹¹æœè¦å¤„ç†ï¼š</p>
        <div class="analogy-steps">
          <div class="step">
            <span class="step-icon">ğŸ”</span>
            <div>
              <strong>filterï¼ˆè´¨æ£€å‘˜ï¼‰</strong>
              <span>æŒ‘å‡ºå¥½è‹¹æœï¼Œæ·˜æ±°åçš„</span>
            </div>
          </div>
          <div class="step-arrow">â†’</div>
          <div class="step">
            <span class="step-icon">âœ‚ï¸</span>
            <div>
              <strong>mapï¼ˆåŠ å·¥å‘˜ï¼‰</strong>
              <span>æŠŠè‹¹æœå‰Šçš®åˆ‡ç‰‡</span>
            </div>
          </div>
          <div class="step-arrow">â†’</div>
          <div class="step">
            <span class="step-icon">ğŸ§ƒ</span>
            <div>
              <strong>reduceï¼ˆæ¦¨æ±æœºï¼‰</strong>
              <span>å…¨éƒ¨æ¦¨æˆä¸€æ¯æœæ±</span>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- 1. æ¦‚å¿µè¯´æ˜ -->
    <KnowledgeCard title="ğŸ“– ä»€ä¹ˆæ˜¯é«˜é˜¶å‡½æ•°">
      <div class="concept-content">
        <h4>ğŸ“š å®˜æ–¹å®šä¹‰</h4>
        <p><strong>é«˜é˜¶å‡½æ•°ï¼ˆHigher-Order Functionï¼‰</strong>ï¼šæ»¡è¶³ä»¥ä¸‹ä»»ä¸€æ¡ä»¶çš„å‡½æ•°ï¼š</p>
        <ul>
          <li>æ¥æ”¶ä¸€ä¸ªæˆ–å¤šä¸ª<strong>å‡½æ•°ä½œä¸ºå‚æ•°</strong></li>
          <li><strong>è¿”å›ä¸€ä¸ªå‡½æ•°</strong></li>
        </ul>
        
        <div class="info-box">
          <span class="info-icon">ğŸ’¡</span>
          <p>JavaScript ä¸­æ•°ç»„è‡ªå¸¦çš„ <code>filter</code>ã€<code>map</code>ã€<code>reduce</code> å°±æ˜¯é«˜é˜¶å‡½æ•°ï¼Œå› ä¸ºå®ƒä»¬éƒ½æ¥æ”¶ä¸€ä¸ªå›è°ƒå‡½æ•°ä½œä¸ºå‚æ•°ã€‚</p>
        </div>

        <h4>ğŸ”¥ æ ¸å¿ƒä¸‰å‰‘å®¢</h4>
        <div class="method-grid">
          <div class="method-card filter">
            <div class="method-name">filter()</div>
            <div class="method-desc">è¿‡æ»¤</div>
            <div class="method-detail">è¿”å›æ»¡è¶³æ¡ä»¶çš„å…ƒç´ </div>
          </div>
          <div class="method-card map">
            <div class="method-name">map()</div>
            <div class="method-desc">æ˜ å°„</div>
            <div class="method-detail">å¯¹æ¯ä¸ªå…ƒç´ è¿›è¡Œè½¬æ¢</div>
          </div>
          <div class="method-card reduce">
            <div class="method-name">reduce()</div>
            <div class="method-desc">å½’çº¦</div>
            <div class="method-detail">ç´¯ç§¯ä¸ºå•ä¸€å€¼</div>
          </div>
        </div>
      </div>
    </KnowledgeCard>

    <!-- 2. ä¸ºä»€ä¹ˆåœ¨ Vue ä¸­éœ€è¦ -->
    <KnowledgeCard title="ğŸ’¡ ä¸ºä»€ä¹ˆ Vue å¼€å‘éœ€è¦é«˜é˜¶å‡½æ•°">
      <div class="concept-content">
        <h4>ğŸ¯ Vue å®˜æ–¹æ–‡æ¡£æ¨è</h4>
        <p>Vue 2 å®˜æ–¹æ–‡æ¡£æ˜ç¡®æ¨èä½¿ç”¨ <code>filter</code>ã€<code>map</code> ç­‰æ•°ç»„æ–¹æ³•é…åˆ computed å±æ€§æ¥å¤„ç†åˆ—è¡¨æ•°æ®ï¼š</p>
        
        <div class="code-example">
          <div class="code-title">ğŸ“ Vue å®˜æ–¹ç¤ºä¾‹ï¼šä½¿ç”¨ computed + filter è¿‡æ»¤åˆ—è¡¨</div>
          <CodeBlock :code="vueFilterExample" language="javascript" />
        </div>
        
        <h4>ğŸŒŸ å…¸å‹åº”ç”¨åœºæ™¯</h4>
        <ul>
          <li><strong>æœç´¢è¿‡æ»¤</strong>ï¼šv-for é…åˆ computed è¿‡æ»¤åˆ—è¡¨</li>
          <li><strong>æ•°æ®æ ¼å¼åŒ–</strong>ï¼šå°† API è¿”å›çš„æ•°æ®è½¬æ¢ä¸ºç»„ä»¶éœ€è¦çš„æ ¼å¼</li>
          <li><strong>è´­ç‰©è½¦è®¡ç®—</strong>ï¼šé€‰ä¸­å•†å“æ•°é‡ã€æ€»ä»·è®¡ç®—</li>
          <li><strong>æƒé™è¿‡æ»¤</strong>ï¼šæ ¹æ®ç”¨æˆ·è§’è‰²è¿‡æ»¤èœå•</li>
          <li><strong>ç»Ÿè®¡æ±‡æ€»</strong>ï¼šè®¢å•æ€»é‡‘é¢ã€å¹³å‡åˆ†ç­‰</li>
        </ul>
      </div>
    </KnowledgeCard>

    <!-- 3. è¯­æ³•æ¦‚è§ˆ -->
    <KnowledgeCard title="ğŸ“ è¯­æ³•æ ¼å¼">
      <CodeBlock :code="syntaxCode" language="javascript" />
    </KnowledgeCard>

    <!-- Demo åˆ—è¡¨ -->
    <h2 class="section-title">ğŸ¯ å®æˆ˜æ¼”ç¤º</h2>

    <!-- Demo 1: filter åŸºç¡€ -->
    <KnowledgeCard title="Demo 1ï¼šfilter è¿‡æ»¤æ•°ç»„">
      <div class="demo-intro">
        <p><code>filter()</code> éå†æ•°ç»„ï¼Œå›è°ƒè¿”å› <code>true</code> çš„å…ƒç´ ä¼šè¢«ä¿ç•™åˆ°æ–°æ•°ç»„ä¸­ã€‚</p>
        <div class="key-point">
          <span class="key-icon">ğŸ”‘</span>
          <span>ä¸ä¿®æ”¹åŸæ•°ç»„ï¼Œè¿”å›æ–°æ•°ç»„</span>
        </div>
      </div>
      <DemoBox 
        demoPath="es6/filter-basic"
        title="filter åŸºæœ¬ç”¨æ³•"
        :height="350"
      />
    </KnowledgeCard>

    <!-- Demo 2: filter è¿›é˜¶ -->
    <KnowledgeCard title="Demo 2ï¼šfilter è¿›é˜¶åº”ç”¨">
      <div class="demo-intro">
        <p>åœ¨ Vue ä¸­ï¼Œæœ€å¸¸è§çš„ç”¨æ³•æ˜¯é…åˆ <code>computed</code> å®ç°æœç´¢è¿‡æ»¤åŠŸèƒ½ï¼š</p>
        <CodeBlock :code="vueFilterAdvanced" language="javascript" />
      </div>
      <DemoBox 
        demoPath="es6/filter-advanced"
        title="filter è¿‡æ»¤å¯¹è±¡æ•°ç»„"
        :height="440"
      />
    </KnowledgeCard>

    <!-- Demo 3: map åŸºç¡€ -->
    <KnowledgeCard title="Demo 3ï¼šmap æ˜ å°„æ•°ç»„">
      <div class="demo-intro">
        <p><code>map()</code> å¯¹æ¯ä¸ªå…ƒç´ æ‰§è¡Œå›è°ƒï¼Œè¿”å›å€¼ç»„æˆæ–°æ•°ç»„ã€‚æ•°ç»„é•¿åº¦ä¸å˜ï¼</p>
        <div class="key-point">
          <span class="key-icon">ğŸ”‘</span>
          <span>ä¸€å¯¹ä¸€è½¬æ¢ï¼Œæ•°ç»„é•¿åº¦æ°¸è¿œç›¸ç­‰</span>
        </div>
      </div>
      <DemoBox 
        demoPath="es6/map-basic"
        title="map åŸºæœ¬ç”¨æ³•"
        :height="350"
      />
    </KnowledgeCard>

    <!-- Demo 4: map è¿›é˜¶ -->
    <KnowledgeCard title="Demo 4ï¼šmap è¿›é˜¶åº”ç”¨">
      <div class="demo-intro">
        <p>å®é™…å¼€å‘ä¸­ï¼Œå¸¸ç”¨ map å¤„ç† API æ•°æ®æ ¼å¼ï¼š</p>
        <CodeBlock :code="mapAdvancedCode" language="javascript" />
      </div>
      <DemoBox 
        demoPath="es6/map-advanced"
        title="map æ•°æ®è½¬æ¢"
        :height="380"
      />
    </KnowledgeCard>

    <!-- Demo 5: reduce åŸºç¡€ -->
    <KnowledgeCard title="Demo 5ï¼šreduce å½’çº¦æ•°ç»„">
      <div class="demo-intro">
        <p><code>reduce()</code> æ˜¯æœ€å¼ºå¤§çš„æ•°ç»„æ–¹æ³•ï¼Œå¯ä»¥å®ç° filter å’Œ map çš„åŠŸèƒ½ï¼</p>
        <div class="key-point">
          <span class="key-icon">ğŸ”‘</span>
          <span>åˆå§‹å€¼å‚æ•°å»ºè®®æ°¸è¿œä¼ é€’ï¼Œé¿å…ç©ºæ•°ç»„æŠ¥é”™</span>
        </div>
      </div>
      <DemoBox 
        demoPath="es6/reduce-basic"
        title="reduce åŸºæœ¬ç”¨æ³•"
        :height="420"
      />
    </KnowledgeCard>

    <!-- Demo 6: reduce è¿›é˜¶ -->
    <KnowledgeCard title="Demo 6ï¼šreduce è¿›é˜¶åº”ç”¨">
      <div class="demo-intro">
        <p>reduce çš„é«˜çº§ç”¨æ³•ï¼šæ•°ç»„å»é‡ã€åˆ†ç»„ç»Ÿè®¡ã€æ‰å¹³åŒ–ç­‰</p>
      </div>
      <DemoBox 
        demoPath="es6/reduce-advanced"
        title="reduce é«˜çº§ç”¨æ³•"
        :height="450"
      />
    </KnowledgeCard>

    <!-- Demo 7: é“¾å¼è°ƒç”¨ -->
    <KnowledgeCard title="Demo 7ï¼šé“¾å¼è°ƒç”¨ï¼ˆé‡ç‚¹ï¼ï¼‰">
      <div class="demo-intro">
        <p>å› ä¸º filter å’Œ map éƒ½è¿”å›æ•°ç»„ï¼Œæ‰€ä»¥å¯ä»¥<strong>é“¾å¼è°ƒç”¨</strong>ï¼Œå½¢æˆæ•°æ®å¤„ç†ç®¡é“ï¼š</p>
        <div class="pipeline-visual">
          <span class="pipe-item data">åŸå§‹æ•°æ®</span>
          <span class="pipe-arrow">â†’</span>
          <span class="pipe-item filter">.filter()</span>
          <span class="pipe-arrow">â†’</span>
          <span class="pipe-item map">.map()</span>
          <span class="pipe-arrow">â†’</span>
          <span class="pipe-item reduce">.reduce()</span>
          <span class="pipe-arrow">â†’</span>
          <span class="pipe-item result">ç»“æœ</span>
        </div>
      </div>
      <DemoBox 
        demoPath="es6/chain-methods"
        title="é“¾å¼è°ƒç”¨"
        :height="420"
      />
    </KnowledgeCard>

    <!-- Demo 8: å®æˆ˜æ¡ˆä¾‹ -->
    <KnowledgeCard title="Demo 8ï¼šè´­ç‰©è½¦è®¡ç®—å®æˆ˜">
      <div class="demo-intro">
        <p>ç»¼åˆè¿ç”¨é«˜é˜¶å‡½æ•°å®ç°è´­ç‰©è½¦åŠŸèƒ½ï¼Œè¿™æ˜¯å‰ç«¯é¢è¯•é«˜é¢‘é¢˜ï¼</p>
      </div>
      <DemoBox 
        demoPath="es6/practical-example"
        title="è´­ç‰©è½¦å®æˆ˜"
        :height="520"
      />
    </KnowledgeCard>

    <!-- å¯¹æ¯”è¡¨æ ¼ -->
    <KnowledgeCard title="ğŸ“Š ä¸‰å¤§é«˜é˜¶å‡½æ•°å¯¹æ¯”">
      <table class="compare-table">
        <thead>
          <tr>
            <th>æ–¹æ³•</th>
            <th>ä½œç”¨</th>
            <th>è¿”å›å€¼</th>
            <th>æ•°ç»„é•¿åº¦</th>
            <th>Vue å¸¸ç”¨åœºæ™¯</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td><code>filter()</code></td>
            <td>è¿‡æ»¤ç­›é€‰</td>
            <td>æ–°æ•°ç»„</td>
            <td>â‰¤ åŸé•¿åº¦</td>
            <td>æœç´¢ã€æƒé™è¿‡æ»¤</td>
          </tr>
          <tr>
            <td><code>map()</code></td>
            <td>æ˜ å°„è½¬æ¢</td>
            <td>æ–°æ•°ç»„</td>
            <td>= åŸé•¿åº¦</td>
            <td>æ•°æ®æ ¼å¼åŒ–</td>
          </tr>
          <tr>
            <td><code>reduce()</code></td>
            <td>å½’çº¦ç´¯ç§¯</td>
            <td>ä»»æ„ç±»å‹</td>
            <td>å˜ä¸ºå•å€¼</td>
            <td>æ±‚å’Œã€ç»Ÿè®¡</td>
          </tr>
        </tbody>
      </table>
    </KnowledgeCard>

    <!-- åœ¨ Vue ä¸­çš„æœ€ä½³å®è·µ -->
    <TipBox type="info" title="ğŸ’¡ Vue 2 ä¸­çš„æœ€ä½³å®è·µ">
      <ul>
        <li>åˆ—è¡¨è¿‡æ»¤/æ’åºä½¿ç”¨ <strong>computed å±æ€§</strong>ï¼Œè‡ªåŠ¨ç¼“å­˜ç»“æœ</li>
        <li>åµŒå¥— v-for ä¸­è¿‡æ»¤æ•°ç»„å¯ä½¿ç”¨ <strong>methods æ–¹æ³•</strong></li>
        <li>é¿å…åœ¨æ¨¡æ¿ä¸­ç›´æ¥è°ƒç”¨ filter/mapï¼Œå½±å“æ€§èƒ½</li>
        <li>ä½¿ç”¨éå˜å¼‚æ–¹æ³•ï¼ˆfilterã€mapï¼‰æ›¿æ¢æ•°ç»„ï¼ŒVue èƒ½é«˜æ•ˆæ›´æ–° DOM</li>
      </ul>
    </TipBox>

    <!-- æ³¨æ„äº‹é¡¹ -->
    <TipBox type="warning" title="âš ï¸ å¸¸è§é”™è¯¯">
      <ul>
        <li>âŒ å¿˜è®° returnï¼šå›è°ƒå‡½æ•°å¿…é¡»è¿”å›å€¼ï¼Œå¦åˆ™ filter å…¨ä¸º falseï¼Œmap å…¨ä¸º undefined</li>
        <li>âŒ reduce ä¸ä¼ åˆå§‹å€¼ï¼šç©ºæ•°ç»„ä¼šæŠ¥é”™ "Reduce of empty array with no initial value"</li>
        <li>âŒ è¯¯ä»¥ä¸ºä¼šä¿®æ”¹åŸæ•°ç»„ï¼šè¿™ä¸‰ä¸ªæ–¹æ³•éƒ½è¿”å›æ–°æ•°ç»„/å€¼ï¼ŒåŸæ•°ç»„ä¸å˜</li>
        <li>âŒ åœ¨æ¨¡æ¿ä¸­ä½¿ç”¨ï¼š<code v-pre>{{ items.filter(...) }}</code> æ¯æ¬¡æ¸²æŸ“éƒ½é‡æ–°è®¡ç®—ï¼Œåº”ä½¿ç”¨ computed</li>
      </ul>
    </TipBox>
  </div>
</template>

<script>
/**
 * @description é«˜é˜¶å‡½æ•°çŸ¥è¯†ç‚¹é¡µé¢ï¼ˆES6 æ ¸å¿ƒï¼‰
 * @author Vue2 Learning Project
 * 
 * å†…å®¹æ¥æºï¼šContext7 Vue 2 å®˜æ–¹æ–‡æ¡£
 * - åˆ—è¡¨è¿‡æ»¤ä½¿ç”¨ computed + filter
 * - åµŒå¥— v-for ä½¿ç”¨ methods + filter
 * - æ›¿æ¢æ•°ç»„ä½¿ç”¨éå˜å¼‚æ–¹æ³•ï¼ŒVue é«˜æ•ˆæ›´æ–° DOM
 */
import KnowledgeCard from '@/components/content/KnowledgeCard.vue'
import TipBox from '@/components/content/TipBox.vue'
import CodeBlock from '@/components/demo/CodeBlock.vue'
import DemoBox from '@/components/demo/DemoBox.vue'

export default {
  name: 'HigherOrder',
  
  components: {
    KnowledgeCard,
    TipBox,
    CodeBlock,
    DemoBox
  },
  
  data() {
    return {
      // Vue å®˜æ–¹æ¨èçš„ filter ç”¨æ³•
      vueFilterExample: `// Vue 2 å®˜æ–¹æ–‡æ¡£æ¨èå†™æ³•
// ä½¿ç”¨ computed å±æ€§å®ç°åˆ—è¡¨è¿‡æ»¤

data: {
  numbers: [1, 2, 3, 4, 5]
},

computed: {
  // è¿‡æ»¤å‡ºå¶æ•°
  evenNumbers() {
    return this.numbers.filter(num => num % 2 === 0)
  }
}

// æ¨¡æ¿ä¸­ä½¿ç”¨
// <li v-for="n in evenNumbers">{{ n }}</li>`,

      // filter è¿›é˜¶ç¤ºä¾‹
      vueFilterAdvanced: `// Vue ä¸­å®ç°æœç´¢åŠŸèƒ½
computed: {
  filteredUsers() {
    const query = this.searchQuery.toLowerCase()
    return this.users.filter(user => {
      return user.name.toLowerCase().includes(query)
    })
  }
}`,

      // map è¿›é˜¶ç¤ºä¾‹
      mapAdvancedCode: `// å¤„ç† API è¿”å›æ•°æ®
const apiData = [
  { id: 1, user_name: 'Zhang San', created_at: '2024-01-01' },
  { id: 2, user_name: 'Li Si', created_at: '2024-01-02' }
]

// è½¬æ¢ä¸ºç»„ä»¶éœ€è¦çš„æ ¼å¼
const formattedData = apiData.map(item => ({
  id: item.id,
  name: item.user_name,        // å­—æ®µé‡å‘½å
  date: formatDate(item.created_at)  // æ ¼å¼åŒ–
}))`,

      // è¯­æ³•æ¦‚è§ˆä»£ç 
      syntaxCode: `// ==================== filter è¿‡æ»¤ ====================
// è¯­æ³•ï¼šarray.filter(callback(element, index, array))
// è¿”å›ï¼šæ»¡è¶³æ¡ä»¶çš„å…ƒç´ ç»„æˆçš„æ–°æ•°ç»„

const numbers = [1, 2, 3, 4, 5, 6]
const evenNumbers = numbers.filter(num => num % 2 === 0)
// ç»“æœ: [2, 4, 6]


// ==================== map æ˜ å°„ ====================
// è¯­æ³•ï¼šarray.map(callback(element, index, array))
// è¿”å›ï¼šæ¯ä¸ªå…ƒç´ è½¬æ¢åç»„æˆçš„æ–°æ•°ç»„

const prices = [100, 200, 300]
const discounted = prices.map(price => price * 0.8)
// ç»“æœ: [80, 160, 240]


// ==================== reduce å½’çº¦ ====================
// è¯­æ³•ï¼šarray.reduce(callback(accumulator, current, index, array), initialValue)
// è¿”å›ï¼šç´¯ç§¯è®¡ç®—åçš„å•ä¸€å€¼

const scores = [85, 90, 78, 92]
const total = scores.reduce((sum, score) => sum + score, 0)
// ç»“æœ: 345

// å‚æ•°è§£é‡Šï¼š
// accumulator - ç´¯ç§¯å™¨ï¼ˆä¸Šä¸€æ¬¡å›è°ƒçš„è¿”å›å€¼ï¼‰
// current     - å½“å‰å…ƒç´ 
// initialValue - åˆå§‹å€¼ï¼ˆå¼ºçƒˆå»ºè®®ä¼ é€’ï¼ï¼‰


// ==================== é“¾å¼è°ƒç”¨ï¼ˆç²¾åï¼ï¼‰====================
const products = [
  { name: 'è‹¹æœ', price: 5, count: 3 },
  { name: 'é¦™è•‰', price: 3, count: 5 },
  { name: 'æ©™å­', price: 8, count: 2 }
]

// è®¡ç®—ä»·æ ¼ > 4 çš„å•†å“æ€»ä»·
const total = products
  .filter(item => item.price > 4)        // è¿‡æ»¤: [è‹¹æœ, æ©™å­]
  .map(item => item.price * item.count)  // æ˜ å°„: [15, 16]
  .reduce((sum, n) => sum + n, 0)        // å½’çº¦: 31`
    }
  }
}
</script>

<style lang="scss" scoped>
.knowledge-page {
  max-width: 900px;
  margin: 0 auto;
}

.page-header {
  margin-bottom: $spacing-xl;
  
  h1 {
    font-size: $font-size-3xl;
    margin-bottom: $spacing-sm;
  }
  
  .subtitle {
    color: $color-text-secondary;
    font-size: $font-size-lg;
  }
}

// é€šä¿—æ¯”å–»ç›’å­
.analogy-box {
  display: flex;
  gap: $spacing-lg;
  padding: $spacing-lg;
  background: linear-gradient(135deg, #fff8e1 0%, #ffecb3 100%);
  border-radius: $radius-lg;
  margin-bottom: $spacing-xl;
  border: 1px solid #ffe082;
  
  .analogy-icon {
    font-size: 48px;
  }
  
  .analogy-content {
    flex: 1;
    
    h4 {
      font-size: $font-size-lg;
      color: #f57c00;
      margin-bottom: $spacing-sm;
    }
    
    p {
      color: #e65100;
      margin-bottom: $spacing-md;
    }
  }
  
  .analogy-steps {
    display: flex;
    align-items: center;
    flex-wrap: wrap;
    gap: $spacing-sm;
  }
  
  .step {
    display: flex;
    align-items: center;
    gap: $spacing-sm;
    background: white;
    padding: $spacing-sm $spacing-md;
    border-radius: $radius-md;
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08);
    
    .step-icon {
      font-size: 24px;
    }
    
    strong {
      display: block;
      color: $color-text;
      font-size: $font-size-sm;
    }
    
    span {
      display: block;
      color: $color-text-secondary;
      font-size: $font-size-xs;
    }
  }
  
  .step-arrow {
    font-size: 20px;
    color: #ff9800;
    font-weight: bold;
  }
}

.section-title {
  font-size: $font-size-xl;
  margin: $spacing-xl 0 $spacing-lg;
  padding-bottom: $spacing-sm;
  border-bottom: 2px solid $color-primary;
}

.demo-intro {
  margin-bottom: $spacing-md;
  
  p {
    color: $color-text-secondary;
    margin-bottom: $spacing-sm;
  }
}

.concept-content {
  h4 {
    color: $color-primary;
    margin: $spacing-md 0 $spacing-sm;
    
    &:first-child {
      margin-top: 0;
    }
  }
  
  ul {
    padding-left: $spacing-lg;
    
    li {
      margin-bottom: $spacing-xs;
      line-height: 1.8;
    }
  }
  
  code {
    background: $color-code-bg;
    padding: 2px 6px;
    border-radius: 4px;
    font-family: $font-family-code;
    color: $color-primary;
  }
}

// ä¿¡æ¯ç›’å­
.info-box {
  display: flex;
  align-items: flex-start;
  gap: $spacing-sm;
  padding: $spacing-md;
  background: #e3f2fd;
  border-radius: $radius-md;
  margin: $spacing-md 0;
  
  .info-icon {
    font-size: 20px;
  }
  
  p {
    margin: 0;
    color: #1565c0;
    line-height: 1.6;
  }
}

// æ–¹æ³•å¡ç‰‡ç½‘æ ¼
.method-grid {
  display: grid;
  grid-template-columns: repeat(3, 1fr);
  gap: $spacing-md;
  margin-top: $spacing-md;
  
  @media (max-width: 600px) {
    grid-template-columns: 1fr;
  }
}

.method-card {
  padding: $spacing-md;
  border-radius: $radius-md;
  text-align: center;
  
  &.filter {
    background: linear-gradient(135deg, #e8f5e9 0%, #c8e6c9 100%);
    border: 1px solid #a5d6a7;
    
    .method-name { color: #2e7d32; }
  }
  
  &.map {
    background: linear-gradient(135deg, #e3f2fd 0%, #bbdefb 100%);
    border: 1px solid #90caf9;
    
    .method-name { color: #1565c0; }
  }
  
  &.reduce {
    background: linear-gradient(135deg, #fce4ec 0%, #f8bbd9 100%);
    border: 1px solid #f48fb1;
    
    .method-name { color: #c2185b; }
  }
  
  .method-name {
    font-family: $font-family-code;
    font-size: $font-size-lg;
    font-weight: 600;
  }
  
  .method-desc {
    font-size: $font-size-sm;
    color: $color-text-secondary;
    margin: $spacing-xs 0;
  }
  
  .method-detail {
    font-size: $font-size-xs;
    color: $color-text-secondary;
  }
}

// å…³é”®ç‚¹æç¤º
.key-point {
  display: inline-flex;
  align-items: center;
  gap: $spacing-xs;
  padding: $spacing-xs $spacing-md;
  background: #fff3e0;
  border-radius: $radius-full;
  font-size: $font-size-sm;
  color: #e65100;
  margin-top: $spacing-sm;
  
  .key-icon {
    font-size: 16px;
  }
}

// ä»£ç ç¤ºä¾‹ç›’å­
.code-example {
  margin: $spacing-md 0;
  
  .code-title {
    font-size: $font-size-sm;
    color: $color-text-secondary;
    margin-bottom: $spacing-sm;
  }
}

// ç®¡é“å¯è§†åŒ–
.pipeline-visual {
  display: flex;
  align-items: center;
  flex-wrap: wrap;
  gap: $spacing-xs;
  margin: $spacing-md 0;
  padding: $spacing-md;
  background: $color-bg;
  border-radius: $radius-md;
  
  .pipe-item {
    padding: $spacing-xs $spacing-md;
    border-radius: $radius-sm;
    font-family: $font-family-code;
    font-size: $font-size-sm;
    font-weight: 500;
    
    &.data { background: #e0e0e0; color: #424242; }
    &.filter { background: #c8e6c9; color: #2e7d32; }
    &.map { background: #bbdefb; color: #1565c0; }
    &.reduce { background: #f8bbd9; color: #c2185b; }
    &.result { background: #b9f6ca; color: #1b5e20; }
  }
  
  .pipe-arrow {
    color: $color-text-secondary;
    font-weight: bold;
  }
}

.compare-table {
  width: 100%;
  border-collapse: collapse;
  
  th, td {
    padding: $spacing-sm $spacing-md;
    text-align: left;
    border: 1px solid $color-border;
  }
  
  th {
    background: $color-bg;
    font-weight: 600;
  }
  
  code {
    background: $color-code-bg;
    padding: 2px 6px;
    border-radius: 4px;
    font-family: $font-family-code;
    color: $color-primary;
  }
}
</style>

<template>
  <div class="knowledge-page">
    <h2>ğŸª† 8.3 åµŒå¥—è·¯ç”±</h2>
    <p class="page-desc">åµŒå¥—è·¯ç”±å…è®¸åœ¨çˆ¶ç»„ä»¶ä¸­åµŒå…¥å­è·¯ç”±è§†å›¾ï¼Œå®ç°å¤æ‚çš„é¡µé¢å¸ƒå±€</p>

    <!-- æ¦‚å¿µè¯´æ˜ -->
    <KnowledgeCard title="ğŸ“– ä»€ä¹ˆæ˜¯åµŒå¥—è·¯ç”±">
      <div class="concept-content">
        <div class="metaphor">
          <span class="icon">ğŸ¢</span>
          <div>
            <strong>é€šä¿—æ¯”å–»ï¼šå¤§æ¥¼ä¸æ¥¼å±‚</strong>
            <p>å°±åƒä¸€æ ‹å¤§æ¥¼ï¼ˆçˆ¶è·¯ç”±ï¼‰é‡Œæœ‰å¤šä¸ªæ¥¼å±‚ï¼ˆå­è·¯ç”±ï¼‰ã€‚è¿›å…¥å¤§æ¥¼åï¼Œè¿˜å¯ä»¥é€‰æ‹©å»å“ªä¸ªæ¥¼å±‚ã€‚æ¯ä¸ªæ¥¼å±‚éƒ½åœ¨å¤§æ¥¼å†…éƒ¨å±•ç¤ºï¼Œè€Œä¸æ˜¯ç¦»å¼€å¤§æ¥¼ã€‚</p>
          </div>
        </div>
        <div class="definition">
          <strong>å®˜æ–¹å®šä¹‰ï¼š</strong>
          åµŒå¥—è·¯ç”±æ˜¯æŒ‡åœ¨ä¸€ä¸ªè·¯ç”±ç»„ä»¶å†…éƒ¨å†æ”¾ç½® <code>&lt;router-view&gt;</code>ï¼Œé…åˆ <code>children</code> é…ç½®å®ç°çˆ¶å­è·¯ç”±åµŒå¥—ã€‚
        </div>
      </div>
    </KnowledgeCard>

    <!-- æ ¸å¿ƒè¯­æ³• -->
    <KnowledgeCard title="ğŸ“ åµŒå¥—è·¯ç”±é…ç½®">
      <CodeBlock :code="nestedConfig" language="javascript" />
    </KnowledgeCard>

    <!-- ç»“æ„å›¾ -->
    <KnowledgeCard title="ğŸ—ï¸ åµŒå¥—ç»“æ„ç¤ºæ„">
      <div class="structure-diagram">
        <div class="layout-box">
          <div class="header">App.vueï¼ˆæ ¹ç»„ä»¶ï¼‰</div>
          <div class="router-view">
            <div class="inner-box">
              <div class="header parent">User.vueï¼ˆçˆ¶è·¯ç”±ç»„ä»¶ï¼‰</div>
              <div class="router-view child">
                <div class="child-box">Profile.vue / Posts.vueï¼ˆå­è·¯ç”±ç»„ä»¶ï¼‰</div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </KnowledgeCard>

    <!-- Demo -->
    <KnowledgeCard title="ğŸ¯ Demo æ¼”ç¤º">
      <DemoBox 
        demoPath="router/nested-basic" 
        title="Demo 1: åµŒå¥—è·¯ç”±åŸºç¡€" 
        :height="500"
      />
      
      <DemoBox 
        demoPath="router/nested-default" 
        title="Demo 2: é»˜è®¤å­è·¯ç”±" 
        :height="450"
      />
      
      <DemoBox 
        demoPath="router/nested-multi-level" 
        title="Demo 3: å¤šçº§åµŒå¥—" 
        :height="520"
      />
      
      <DemoBox 
        demoPath="router/nested-named-views" 
        title="Demo 4: å‘½åè§†å›¾" 
        :height="500"
      />
    </KnowledgeCard>

    <!-- æ³¨æ„äº‹é¡¹ -->
    <TipBox type="warning" title="âš ï¸ æ³¨æ„äº‹é¡¹">
      <ul>
        <li><strong>å­è·¯ç”± path ä¸è¦ä»¥ / å¼€å¤´ï¼š</strong>ä»¥ / å¼€å¤´ä¼šè¢«å½“ä½œæ ¹è·¯å¾„</li>
        <li><strong>çˆ¶ç»„ä»¶éœ€è¦ router-viewï¼š</strong>æ²¡æœ‰ router-view å­è·¯ç”±æ— æ³•æ˜¾ç¤º</li>
        <li><strong>é»˜è®¤å­è·¯ç”±ï¼š</strong>path ä¸ºç©ºå­—ç¬¦ä¸²çš„å­è·¯ç”±ä¼šä½œä¸ºé»˜è®¤å­è·¯ç”±</li>
      </ul>
    </TipBox>

    <!-- æœ€ä½³å®è·µ -->
    <TipBox type="success" title="âœ… åº”ç”¨åœºæ™¯">
      <ul>
        <li><strong>åå°ç®¡ç†ç³»ç»Ÿï¼š</strong>ä¾§è¾¹æ  + ä¸»å†…å®¹åŒºå¸ƒå±€</li>
        <li><strong>ä¸ªäººä¸­å¿ƒï¼š</strong>ç”¨æˆ·ä¿¡æ¯ / æˆ‘çš„è®¢å• / è®¾ç½®ç­‰ Tab é¡µ</li>
        <li><strong>æ–‡æ¡£ç½‘ç«™ï¼š</strong>ç›®å½• + æ–‡æ¡£å†…å®¹</li>
      </ul>
    </TipBox>
  </div>
</template>

<script>
import KnowledgeCard from '@/components/content/KnowledgeCard.vue'
import TipBox from '@/components/content/TipBox.vue'
import DemoBox from '@/components/demo/DemoBox.vue'
import CodeBlock from '@/components/demo/CodeBlock.vue'
import scrollTrackingMixin from '@/utils/scrollTrackingMixin'

export default {
  name: 'NestedRoute',
  mixins: [scrollTrackingMixin],
  components: {
    KnowledgeCard,
    TipBox,
    DemoBox,
    CodeBlock
  },
  data() {
    return {
      nestedConfig: `const routes = [
  {
    path: '/user/:id',
    component: User,
    // å­è·¯ç”±é…ç½®
    children: [
      // é»˜è®¤å­è·¯ç”±ï¼ˆpath ä¸ºç©ºï¼‰
      { path: '', component: UserHome },
      // å­è·¯ç”± path ä¸è¦ä»¥ / å¼€å¤´
      { path: 'profile', component: UserProfile },
      { path: 'posts', component: UserPosts }
    ]
  }
]

// åŒ¹é…ç»“æœï¼š
// /user/123        â†’ User + UserHome
// /user/123/profile â†’ User + UserProfile
// /user/123/posts   â†’ User + UserPosts`
    }
  }
}
</script>

<style lang="scss" scoped>
.knowledge-page {
  max-width: 900px;
  margin: 0 auto;
  
  h2 {
    font-size: 28px;
    margin-bottom: 8px;
  }
  
  .page-desc {
    color: $color-text-secondary;
    margin-bottom: 24px;
  }
}

.concept-content {
  .metaphor {
    display: flex;
    gap: 16px;
    padding: 16px;
    background: linear-gradient(135deg, #fff3e0, #fce4ec);
    border-radius: 12px;
    margin-bottom: 16px;
    
    .icon { font-size: 36px; }
    
    strong {
      color: $color-text;
      display: block;
      margin-bottom: 4px;
    }
    
    p {
      color: $color-text-secondary;
      font-size: 14px;
      margin: 0;
    }
  }
  
  .definition {
    padding: 12px;
    background: $color-code-bg;
    border-radius: 8px;
    font-size: 14px;
  }
}

.structure-diagram {
  .layout-box {
    border: 2px solid $color-primary;
    border-radius: 12px;
    overflow: hidden;
    
    .header {
      background: $color-primary;
      color: white;
      padding: 8px 12px;
      font-size: 14px;
      font-weight: 500;
      
      &.parent {
        background: #34c759;
      }
    }
    
    .router-view {
      padding: 16px;
      background: rgba(0, 122, 255, 0.05);
      min-height: 80px;
      
      &.child {
        background: rgba(52, 199, 89, 0.1);
        border-radius: 8px;
      }
    }
    
    .inner-box {
      border: 2px solid #34c759;
      border-radius: 8px;
      overflow: hidden;
    }
    
    .child-box {
      padding: 12px;
      background: white;
      text-align: center;
      color: $color-text-secondary;
      font-size: 14px;
      border-radius: 4px;
    }
  }
}
</style>

<template>
  <div class="knowledge-page">
    <h2>ğŸ§­ 8.4 ç¼–ç¨‹å¼å¯¼èˆª</h2>
    <p class="page-desc">é™¤äº†ä½¿ç”¨ &lt;router-link&gt;ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥é€šè¿‡ä»£ç å®ç°é¡µé¢è·³è½¬</p>

    <!-- æ¦‚å¿µè¯´æ˜ -->
    <KnowledgeCard title="ğŸ“– ä»€ä¹ˆæ˜¯ç¼–ç¨‹å¼å¯¼èˆª">
      <div class="concept-content">
        <div class="metaphor">
          <span class="icon">ğŸ®</span>
          <div>
            <strong>é€šä¿—æ¯”å–»ï¼šæ¸¸æˆæ‰‹æŸ„ vs é¥æ§å™¨</strong>
            <p>router-link åƒç”µè§†é¥æ§å™¨ä¸Šçš„æŒ‰é’®ï¼Œç‚¹å‡»å°±åˆ‡æ¢ã€‚è€Œç¼–ç¨‹å¼å¯¼èˆªåƒæ¸¸æˆæ‰‹æŸ„ï¼Œå¯ä»¥é€šè¿‡ä»£ç é€»è¾‘æ§åˆ¶ä½•æ—¶ã€å¦‚ä½•è·³è½¬ã€‚</p>
          </div>
        </div>
        <div class="definition">
          <strong>å®˜æ–¹å®šä¹‰ï¼š</strong>
          ç¼–ç¨‹å¼å¯¼èˆªæ˜¯é€šè¿‡ <code>this.$router</code> çš„æ–¹æ³•ï¼ˆpushã€replaceã€goï¼‰åœ¨ JavaScript ä»£ç ä¸­å®ç°è·¯ç”±è·³è½¬ã€‚
        </div>
      </div>
    </KnowledgeCard>

    <!-- æ ¸å¿ƒæ–¹æ³• -->
    <KnowledgeCard title="ğŸ”§ æ ¸å¿ƒæ–¹æ³•å¯¹æ¯”">
      <table class="method-table">
        <thead>
          <tr>
            <th>æ–¹æ³•</th>
            <th>è¯´æ˜</th>
            <th>å†å²è®°å½•</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td><code>$router.push()</code></td>
            <td>è·³è½¬åˆ°æ–°é¡µé¢</td>
            <td>âœ… æ·»åŠ è®°å½•</td>
          </tr>
          <tr>
            <td><code>$router.replace()</code></td>
            <td>æ›¿æ¢å½“å‰é¡µé¢</td>
            <td>âŒ ä¸æ·»åŠ </td>
          </tr>
          <tr>
            <td><code>$router.go(n)</code></td>
            <td>å‰è¿›/åé€€ n æ­¥</td>
            <td>åœ¨å†å²ä¸­ç§»åŠ¨</td>
          </tr>
          <tr>
            <td><code>$router.back()</code></td>
            <td>åé€€ä¸€æ­¥</td>
            <td>= go(-1)</td>
          </tr>
          <tr>
            <td><code>$router.forward()</code></td>
            <td>å‰è¿›ä¸€æ­¥</td>
            <td>= go(1)</td>
          </tr>
        </tbody>
      </table>
    </KnowledgeCard>

    <!-- push è¯­æ³• -->
    <KnowledgeCard title="ğŸ“ push æ–¹æ³•è¯­æ³•">
      <CodeBlock :code="pushSyntax" language="javascript" />
    </KnowledgeCard>

    <!-- Demo -->
    <KnowledgeCard title="ğŸ¯ Demo æ¼”ç¤º">
      <DemoBox 
        demoPath="router/nav-push" 
        title="Demo 1: push è·³è½¬" 
        :height="450"
      />
      
      <DemoBox 
        demoPath="router/nav-replace" 
        title="Demo 2: replace æ›¿æ¢" 
        :height="400"
      />
      
      <DemoBox 
        demoPath="router/nav-go" 
        title="Demo 3: go/back/forward" 
        :height="420"
      />
      
      <DemoBox 
        demoPath="router/nav-params" 
        title="Demo 4: ä¼ é€’å‚æ•°" 
        :height="480"
      />
      
      <DemoBox 
        demoPath="router/nav-practical" 
        title="Demo 5: å®æˆ˜åº”ç”¨" 
        :height="500"
      />
    </KnowledgeCard>

    <!-- æ³¨æ„äº‹é¡¹ -->
    <TipBox type="warning" title="âš ï¸ æ³¨æ„äº‹é¡¹">
      <ul>
        <li><strong>$router vs $routeï¼š</strong>$router æ˜¯è·¯ç”±å®ä¾‹ï¼ˆç”¨äºå¯¼èˆªï¼‰ï¼Œ$route æ˜¯å½“å‰è·¯ç”±ä¿¡æ¯ï¼ˆç”¨äºè·å–å‚æ•°ï¼‰</li>
        <li><strong>å‘½åè·¯ç”±æ›´å®‰å…¨ï¼š</strong>ä½¿ç”¨ name è€Œé pathï¼Œé¿å… URL å˜æ›´å¯¼è‡´è·³è½¬å¤±è´¥</li>
        <li><strong>push è¿”å› Promiseï¼š</strong>Vue Router 3.1+ çš„ push è¿”å› Promiseï¼Œå¯ä»¥å¤„ç†å¯¼èˆªç»“æœ</li>
      </ul>
    </TipBox>

    <!-- æœ€ä½³å®è·µ -->
    <TipBox type="success" title="âœ… é€‚ç”¨åœºæ™¯">
      <ul>
        <li>è¡¨å•æäº¤æˆåŠŸåè·³è½¬</li>
        <li>ç™»å½•æˆåŠŸåé‡å®šå‘</li>
        <li>æ ¹æ®æ¡ä»¶åŠ¨æ€å†³å®šè·³è½¬ç›®æ ‡</li>
        <li>éœ€è¦ä¼ é€’å¤æ‚å‚æ•°æ—¶</li>
      </ul>
    </TipBox>
  </div>
</template>

<script>
import KnowledgeCard from '@/components/content/KnowledgeCard.vue'
import TipBox from '@/components/content/TipBox.vue'
import DemoBox from '@/components/demo/DemoBox.vue'
import CodeBlock from '@/components/demo/CodeBlock.vue'

export default {
  name: 'ProgrammaticNav',
  components: {
    KnowledgeCard,
    TipBox,
    DemoBox,
    CodeBlock
  },
  data() {
    return {
      pushSyntax: `// å­—ç¬¦ä¸²è·¯å¾„
this.$router.push('/user/123')

// å¯¹è±¡å½¢å¼
this.$router.push({ path: '/user/123' })

// å‘½åè·¯ç”± + params
this.$router.push({ 
  name: 'user', 
  params: { id: 123 } 
})

// å¸¦ query å‚æ•°ï¼ˆURL: /search?keyword=vueï¼‰
this.$router.push({ 
  path: '/search', 
  query: { keyword: 'vue' } 
})

// å¤„ç†å¯¼èˆªç»“æœï¼ˆVue Router 3.1+ï¼‰
this.$router.push('/user/123')
  .then(() => console.log('å¯¼èˆªæˆåŠŸ'))
  .catch(err => console.log('å¯¼èˆªå¤±è´¥', err))`
    }
  }
}
</script>

<style lang="scss" scoped>
.knowledge-page {
  max-width: 900px;
  margin: 0 auto;
  
  h2 {
    font-size: 28px;
    margin-bottom: 8px;
  }
  
  .page-desc {
    color: $color-text-secondary;
    margin-bottom: 24px;
  }
}

.concept-content {
  .metaphor {
    display: flex;
    gap: 16px;
    padding: 16px;
    background: linear-gradient(135deg, #e8f5e9, #e3f2fd);
    border-radius: 12px;
    margin-bottom: 16px;
    
    .icon { font-size: 36px; }
    
    strong {
      color: $color-text;
      display: block;
      margin-bottom: 4px;
    }
    
    p {
      color: $color-text-secondary;
      font-size: 14px;
      margin: 0;
    }
  }
  
  .definition {
    padding: 12px;
    background: $color-code-bg;
    border-radius: 8px;
    font-size: 14px;
  }
}

.method-table {
  width: 100%;
  border-collapse: collapse;
  font-size: 14px;
  
  th, td {
    padding: 12px;
    text-align: left;
    border-bottom: 1px solid $color-border;
  }
  
  th {
    background: $color-bg;
    font-weight: 600;
  }
  
  code {
    background: rgba(0, 122, 255, 0.1);
    padding: 2px 6px;
    border-radius: 4px;
    color: $color-primary;
  }
}
</style>

<template>
  <div class="knowledge-page">
    <h1>ğŸš€ 8.1 è·¯ç”±åŸºç¡€</h1>

    <!-- æ¦‚å¿µè¯´æ˜ -->
    <KnowledgeCard title="ğŸ“– ä»€ä¹ˆæ˜¯å‰ç«¯è·¯ç”±">
      <p>
        <strong>é€šä¿—æ¯”å–»</strong>ï¼šè·¯ç”±å°±åƒ<strong>é…’åº—å‰å°</strong>â€”â€”
        ä½ è¯´è¦å»å“ªä¸ªæˆ¿é—´ï¼ˆURLï¼‰ï¼Œå‰å°å°±å¸¦ä½ å»å¯¹åº”çš„æˆ¿é—´ï¼ˆç»„ä»¶ï¼‰ã€‚
      </p>
      <div class="concept-box">
        <h4>ğŸ”„ å‰ç«¯è·¯ç”± vs åç«¯è·¯ç”±</h4>
        <ul>
          <li><strong>åç«¯è·¯ç”±</strong>ï¼šæ¯æ¬¡ URL å˜åŒ–éƒ½å‘æœåŠ¡å™¨è¯·æ±‚æ–°é¡µé¢ï¼Œæ•´é¡µåˆ·æ–°</li>
          <li><strong>å‰ç«¯è·¯ç”±</strong>ï¼šURL å˜åŒ–æ—¶ï¼ŒJS æ‹¦æˆªè¯·æ±‚ï¼Œåªæ›´æ–°å±€éƒ¨ç»„ä»¶ï¼Œä¸åˆ·æ–°é¡µé¢ï¼ˆSPAï¼‰</li>
        </ul>
      </div>
    </KnowledgeCard>

    <!-- Vue Router æ ¸å¿ƒæ¦‚å¿µ -->
    <KnowledgeCard title="ğŸ§© Vue Router æ ¸å¿ƒæ¦‚å¿µ">
      <div class="concept-grid">
        <div class="concept-item">
          <span class="icon">ğŸ”—</span>
          <h4>&lt;router-link&gt;</h4>
          <p>å¯¼èˆªç»„ä»¶ï¼Œæ¸²æŸ“ä¸º &lt;a&gt; æ ‡ç­¾ï¼Œç‚¹å‡»æ—¶åˆ‡æ¢è·¯ç”±</p>
        </div>
        <div class="concept-item">
          <span class="icon">ğŸ“¦</span>
          <h4>&lt;router-view&gt;</h4>
          <p>è·¯ç”±å‡ºå£ï¼ŒåŒ¹é…åˆ°çš„ç»„ä»¶å°†æ¸²æŸ“åœ¨è¿™é‡Œ</p>
        </div>
        <div class="concept-item">
          <span class="icon">âš™ï¸</span>
          <h4>routes</h4>
          <p>è·¯ç”±é…ç½®æ•°ç»„ï¼Œå®šä¹‰ path å’Œ component çš„æ˜ å°„</p>
        </div>
        <div class="concept-item">
          <span class="icon">ğŸ“</span>
          <h4>$route</h4>
          <p>å½“å‰è·¯ç”±ä¿¡æ¯å¯¹è±¡ï¼ˆparamsã€queryã€path ç­‰ï¼‰</p>
        </div>
        <div class="concept-item">
          <span class="icon">ğŸ§­</span>
          <h4>$router</h4>
          <p>è·¯ç”±å®ä¾‹ï¼Œç”¨äºç¼–ç¨‹å¼å¯¼èˆªï¼ˆpushã€replaceã€goï¼‰</p>
        </div>
        <div class="concept-item">
          <span class="icon">#ï¸âƒ£</span>
          <h4>mode</h4>
          <p>è·¯ç”±æ¨¡å¼ï¼šhashï¼ˆé»˜è®¤ï¼‰æˆ– history</p>
        </div>
      </div>
    </KnowledgeCard>

    <!-- è·¯ç”±æ¨¡å¼ -->
    <KnowledgeCard title="ğŸ”€ è·¯ç”±æ¨¡å¼å¯¹æ¯”">
      <table class="compare-table">
        <thead>
          <tr>
            <th>ç‰¹æ€§</th>
            <th>Hash æ¨¡å¼</th>
            <th>History æ¨¡å¼</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td>URL æ ·å¼</td>
            <td><code>http://xxx.com/#/home</code></td>
            <td><code>http://xxx.com/home</code></td>
          </tr>
          <tr>
            <td>å®ç°åŸç†</td>
            <td>ç›‘å¬ hashchange äº‹ä»¶</td>
            <td>HTML5 History API</td>
          </tr>
          <tr>
            <td>æœåŠ¡å™¨é…ç½®</td>
            <td>âŒ ä¸éœ€è¦</td>
            <td>âœ… éœ€è¦é…ç½®å›é€€</td>
          </tr>
          <tr>
            <td>å…¼å®¹æ€§</td>
            <td>âœ… æ”¯æŒæ‰€æœ‰æµè§ˆå™¨</td>
            <td>âš ï¸ IE10+</td>
          </tr>
          <tr>
            <td>SEO</td>
            <td>âŒ ä¸å‹å¥½</td>
            <td>âœ… å‹å¥½</td>
          </tr>
        </tbody>
      </table>
    </KnowledgeCard>

    <!-- åŸºæœ¬è¯­æ³• -->
    <KnowledgeCard title="ğŸ“ åŸºæœ¬é…ç½®è¯­æ³•">
      <CodeBlock :code="syntaxCode" language="javascript" />
    </KnowledgeCard>

    <!-- Demo å±•ç¤º -->
    <KnowledgeCard title="ğŸ¯ äº¤äº’å¼æ¼”ç¤º">
      <DemoBox
        demoPath="router/router-basic"
        title="Demo 1: åŸºç¡€è·¯ç”±é…ç½®"
        :height="450"
      />

      <DemoBox
        demoPath="router/router-link-usage"
        title="Demo 2: router-link ä½¿ç”¨"
        :height="400"
      />

      <DemoBox
        demoPath="router/router-link-props"
        title="Demo 3: router-link å±æ€§"
        :height="480"
      />

      <DemoBox
        demoPath="router/router-redirect"
        title="Demo 4: è·¯ç”±é‡å®šå‘ä¸åˆ«å"
        :height="420"
      />

      <DemoBox
        demoPath="router/router-mode"
        title="Demo 5: è·¯ç”±æ¨¡å¼å¯¹æ¯”"
        :height="400"
      />
    </KnowledgeCard>

    <!-- æœ€ä½³å®è·µ -->
    <TipBox type="success" title="ğŸ’¡ æœ€ä½³å®è·µ">
      <ul>
        <li>ä½¿ç”¨ <strong>å‘½åè·¯ç”±</strong> ä»£æ›¿ç¡¬ç¼–ç è·¯å¾„ï¼Œä¾¿äºç»´æŠ¤</li>
        <li>ç”Ÿäº§ç¯å¢ƒæ¨èä½¿ç”¨ <strong>History æ¨¡å¼</strong>ï¼ŒURL æ›´ç¾è§‚</li>
        <li>é…ç½® <strong>é»˜è®¤è·¯ç”±</strong> å’Œ <strong>404 é¡µé¢</strong></li>
        <li>ä½¿ç”¨ <strong>è·¯ç”±æ‡’åŠ è½½</strong> ä¼˜åŒ–é¦–å±åŠ è½½é€Ÿåº¦</li>
      </ul>
    </TipBox>

    <!-- æ³¨æ„äº‹é¡¹ -->
    <TipBox type="warning" title="âš ï¸ æ³¨æ„äº‹é¡¹">
      <ul>
        <li>History æ¨¡å¼éœ€è¦æœåŠ¡å™¨é…ç½®ï¼Œå¦åˆ™åˆ·æ–°ä¼š 404</li>
        <li><code>router-link</code> çš„ <code>to</code> è¦ä»¥ <code>/</code> å¼€å¤´è¡¨ç¤ºç»å¯¹è·¯å¾„</li>
        <li>ä¸è¦åœ¨ <code>router-link</code> å†…ä½¿ç”¨ <code>@click</code>ï¼Œç”¨ <code>@click.native</code></li>
      </ul>
    </TipBox>
  </div>
</template>

<script>
import KnowledgeCard from '@/components/content/KnowledgeCard.vue'
import TipBox from '@/components/content/TipBox.vue'
import CodeBlock from '@/components/demo/CodeBlock.vue'
import DemoBox from '@/components/demo/DemoBox.vue'

export default {
  name: 'RouterBasic',
  components: {
    KnowledgeCard,
    TipBox,
    CodeBlock,
    DemoBox
  },
  data() {
    return {
      syntaxCode: `// 1. å®šä¹‰è·¯ç”±ç»„ä»¶
const Home = { template: '<div>é¦–é¡µ</div>' }
const About = { template: '<div>å…³äº</div>' }

// 2. å®šä¹‰è·¯ç”±é…ç½®
const routes = [
  { path: '/', component: Home },
  { path: '/about', component: About },
  { path: '/user/:id', component: User },  // åŠ¨æ€è·¯ç”±
  { path: '*', redirect: '/' }              // 404 é‡å®šå‘
]

// 3. åˆ›å»ºè·¯ç”±å®ä¾‹
const router = new VueRouter({
  mode: 'history',  // å¯é€‰ï¼š'hash'(é»˜è®¤) æˆ– 'history'
  routes
})

// 4. æŒ‚è½½åˆ° Vue å®ä¾‹
new Vue({
  router,
  render: h => h(App)
}).$mount('#app')`
    }
  }
}
</script>

<style lang="scss" scoped>
.knowledge-page {
  max-width: 900px;

  h1 {
    font-size: $font-size-2xl;
    margin-bottom: $spacing-xl;
    color: $color-text;
  }
}

.concept-box {
  background: rgba($color-primary, 0.05);
  border-radius: $radius-md;
  padding: $spacing-md;
  margin-top: $spacing-md;

  h4 {
    margin: 0 0 $spacing-sm;
    color: $color-primary;
  }

  ul {
    margin: 0;
    padding-left: $spacing-lg;

    li {
      margin-bottom: $spacing-xs;
    }
  }
}

.concept-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
  gap: $spacing-md;
  margin-top: $spacing-md;

  .concept-item {
    background: $color-bg;
    border-radius: $radius-md;
    padding: $spacing-md;
    text-align: center;

    .icon {
      font-size: 32px;
      display: block;
      margin-bottom: $spacing-xs;
    }

    h4 {
      margin: 0 0 $spacing-xs;
      font-size: $font-size-sm;
      color: $color-text;
      font-family: $font-family-code;
    }

    p {
      margin: 0;
      font-size: $font-size-xs;
      color: $color-text-secondary;
    }
  }
}

.compare-table {
  width: 100%;
  border-collapse: collapse;
  margin-top: $spacing-md;

  th, td {
    padding: $spacing-sm $spacing-md;
    text-align: left;
    border: 1px solid $color-border;
  }

  th {
    background: $color-bg;
    font-weight: 600;
  }

  code {
    background: rgba($color-primary, 0.1);
    padding: 2px 6px;
    border-radius: $radius-sm;
    font-size: $font-size-xs;
  }
}
</style>
